<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:6678/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style id="vega-tooltip-style">#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
</style>


<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mario Venegas, Nasser Alshaya and Daniel Avila">

<title>Final Project</title>
<style class="anchorjs"></style><style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="./Final Project, Nasser_Mario_Daniel_files/jquery.min.js.download" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="./Final Project, Nasser_Mario_Daniel_files/clipboard.min.js.download"></script>
<script src="./Final Project, Nasser_Mario_Daniel_files/quarto.js.download"></script>
<script src="./Final Project, Nasser_Mario_Daniel_files/popper.min.js.download"></script>
<script src="./Final Project, Nasser_Mario_Daniel_files/tippy.umd.min.js.download"></script>
<script src="./Final Project, Nasser_Mario_Daniel_files/anchor.min.js.download"></script>
<link href="./Final Project, Nasser_Mario_Daniel_files/tippy.css" rel="stylesheet">
<link href="./Final Project, Nasser_Mario_Daniel_files/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="./Final Project, Nasser_Mario_Daniel_files/bootstrap.min.js.download"></script>
<link href="./Final Project, Nasser_Mario_Daniel_files/bootstrap-icons.css" rel="stylesheet">
<link href="./Final Project, Nasser_Mario_Daniel_files/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="./Final Project, Nasser_Mario_Daniel_files/require.min.js.download" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<style>.ansi-display{font-family:monospace;white-space:pre-wrap;--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #00BC00;--ansiYellow: #949800;--ansiBlue: #0451a5;--ansiMagenta: #bc05bc;--ansiCyan: #0598bc;--ansiWhite: #555555;--ansiBrightBlack: #666666;--ansiBrightRed: #cd3131;--ansiBrightGreen: #14CE14;--ansiBrightYellow: #b5ba00;--ansiBrightBlue: #0451a5;--ansiBrightMagenta: #bc05bc;--ansiBrightCyan: #0598bc;--ansiBrightWhite: #a5a5a5}.dark-mode .ansi-display{--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #0DBC79;--ansiYellow: #e5e510;--ansiBlue: #2472c8;--ansiMagenta: #bc3fbc;--ansiCyan: #11a8cd;--ansiWhite: #e5e5e5;--ansiBrightBlack: #666666;--ansiBrightRed: #f14c4c;--ansiBrightGreen: #23d18b;--ansiBrightYellow: #f5f543;--ansiBrightBlue: #3b8eea;--ansiBrightMagenta: #d670d6;--ansiBrightCyan: #29b8db;--ansiBrightWhite: #e5e5e5}@keyframes ansi-displaly-run-blink{50%{opacity:0}}.fui-FluentProvider h2{border-bottom:none;padding-bottom:0}</style><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="vega-embed" src="./Final Project, Nasser_Mario_Daniel_files/vega-embed@6"></script><style data-make-styles-bucket="d" data-priority="0"></style><style id="fui-FluentProviderr0"></style><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="vega" src="./Final Project, Nasser_Mario_Daniel_files/vega@5"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="vega-lite" src="./Final Project, Nasser_Mario_Daniel_files/vega-lite@5.20.1"></script><style id="vega-embed-style">.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
</style></head>

<body class="quarto-light" data-tabster="{&quot;root&quot;:{}}">

<i tabindex="0" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="http://localhost:6678/FP_DataCleaning.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">
\RecustomVerbatimEnvironment{verbatim}{Verbatim}{
  showspaces = false,
  showtabs = false,
  breaksymbolleft={},
  breaklines
}

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final Project</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mario Venegas, Nasser Alshaya and Daniel Avila </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="write-up" class="level2">
<h2 class="anchored" data-anchor-id="write-up">Write-up<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6678/#write-up" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>This work analyses the use of public transportation within the Hyde Park in Chicago. As most of the poeple in the area are students of the University of Chicago, this analysis seeks to determine the use of Divvy Bikes and CTA buses to define if there should be any changes in the facilitation of services by the University given the preferences and demands of students during different times of the year.</p>
<pre><code>For the analysis, the team used to main sources of data: </code></pre>
<ul>
<li><p>CTA - Ridership - Daily Boarding Totals: This dataset shows systemwide boardings for both bus and rail services provided by CTA, dating back to 2001.</p></li>
<li><p>Divvy Trip history data: Divvy offers quarterly and monthly datasets of every trip taken since 2018.</p>
<p>However, this data had to be cleaned to limit it to (a.) the interest dates (2018-2023, which were selected based on theavailability of data from Divvy), and (b.) Hyde Park. In addition, as the data was cleaned, the team made graphs to visualize the data. Finally, the team made a dashboards that allows to visualize the information for particular timeframes.</p>
<p>The steps followed for this are enumerated below. Each number corresponds to a chunk in the coding section of the document.</p></li>
</ul>
<ol type="1">
<li><p>As mentioned above, the data base from the CTA includes information dating back to 2001, and for every bus route of the CTA in Chicago. The coding shows the steps to limit the information to bus routes 171 and 172 - which operate only in Hyde Park, and to observations corresponding to 2018 onwards.</p></li>
<li><p>After the step above, the CTA data included information for each day from 2018 to 2023. However, due to the fact that the analysis seeks to determine the demand by time of the year, the team decided to group the data by year and month.</p></li>
<li><p>This code block creates a list that captures the average number of rides on a monthly basis across all years from the previous observations_per_month variable. We then create a dataframe that matches the months with the average monthly observations, and plot this into a bar chart. Finally, we use the same data to create a heatmap, however the heatmap is created where the X axis is the month, and the Y axis is a year, which means that each cell is a unique month of each year. By observing the year-month, we can clearly visualize the seasonal pattern of ridership in the data.</p></li>
<li><p>The information provided by Divvy regarding every ride taken in Chicago was uploaded quarterly from 2018-2020 and monthly from 2021-2023. In addition, the names of the columns included in the data bases changed at some point. This chunk explores the differences between each kind of data base, monthly and quarterly.</p></li>
<li><p>In addition, the Divvy data includes information for every trip made in the Chicago area. The data had to be cleaned to include information for Divvy docking stations in Hyde Park only. To identify these docking stations, the team used the following data bases:</p>
<ul>
<li>chicago_areas. This data base from the Chicago City Government includes geometric coordinates for each area in Chicago.</li>
<li>divvy_stations. This shape data base from the City of Chicago includes the geographic coordinates and names of every Divvy docking station in the city.</li>
</ul></li>
</ol>
<p>The general steps followed to identify the doching stations in Hyde Park using this information were the following: - Convert the geometry column in chicago_areas to shapely geometry to make it compatible with the station_gdf, which contained the geographic information of divvy docking stations - Limit geographic location to Hyde Park - Perform spatial joint to print the name of the Divvy Stations in Hyde Park</p>
<ol start="6" type="1">
<li><p>Once the names of the stations in Hyde Park were identified, the team used them to limit the observations in the Divvy data sets to trips that started and ended in Hyde Park. This makes the analysis more comparable to the use of routes 171 and 172, which only operate inside Hyde Park.</p>
<p>Since the information was provided in data sets with different column format, the team had to do three different scraping codes from a folder containing all data bases uploaded by Divvy. The code cleans each of the data sets from Divvy so they only include trips that started and ended in docking stations identified within Hyde Park. Once all the data bases were cleaned, they were concatenated into a single file.</p></li>
</ol>
<p>Chunks 6.1, 6.2, and 6.3 show the process described above for the three column formats identified.</p>
<ol start="7" type="1">
<li><p>This code block is simply naming the datasets to variables so that they can be referenced in preperation for joining into one large dataset.</p></li>
<li><p>We first create dicitionaries in preperation for renaming the columns such that we can concatenate the dataframes together on a column by column basis. Lines 445 - 450 rename the columns such that all columns across the three datasets are the same, and line 450 creates the singular concatenated dataset. Lines 452 through 455 are for data cleaning purposes, while line 458 groups the data by station and date, naming the new column “ride_count”. Ride_count will be essential in the following visualizations and analysis.</p></li>
<li><p>Line 467 is creating a new column titled “year” within the concatenated dataset based on the year of the “year_month” column. We then break the concatenated dataset into two variables, one that contains data pre 2020 and another that contains data post 2020 to highlight any effects that may have occured due to Covid. Additionally, it is worth noting that instruction was fully remote for 2020-2021, which further influenced our decision to create two new graphs for our visualizations.</p>
<p>After breaking the data into pre and post covid, we create two lasagna plots to demonstrate Divvy ridership on a year_month and per station basis.</p></li>
<li><p>In this code block we attempt to generate a average monthly Divvy ridership to compare to the lasagna plots above. We want to see how an aggregated analysis from 2017 to 2024 demonstrate <strong>average</strong> monthly ridership in contrast to the lasagna plots, which show ridership on a monthly basis for each station.</p>
<p>We group the data by year month, and take the mean of the ride_count column, saving that information in the newely created “avg_ride_count” column.</p>
<p>Since the monthly data is saved numerically, we use the months dictionary to map the numeric values via a lambda function to the names of the month, ensuring to save the data in the column as a string. We then further groupby the month column to create a bar chart of the average monthly Divvy utilization.</p>
<p>The benefit of visualizing the data with the lasagna plots in comparison to the bar chart is that we are able to get extra information from the lasagna plots, such as which stations are most active and when, which is not visible in the bar plot.</p></li>
<li><p>This code block creates a file that is essential to plotting data in the dashboard.</p></li>
</ol>
<p>Finally, we also created a multipage dashboard, one page for CTA rides visualizing aggregate rides from 2018 - 2023, and a page for Divvy bikes visualizing aggregate rides from 2017 - 2023.</p>
<p>We want want to note that the dashboard was pushed seperately to the github repository for this project. These dashboards can be accessed directly at “dashboard.py”.</p>
<p><strong>[<a href="https://drive.google.com/drive/u/1/folders/1q9t4VtaZ1b81MvYmoRcrrbEFFR_3E8qz">Link to Google Drive with Data</a>]</strong></p>
</section>
<section id="cta-routes" class="level2">
<h2 class="anchored" data-anchor-id="cta-routes">CTA Routes<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6678/#cta-routes" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<ol type="1">
<li></li>
</ol>
<div id="00e1dd38" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="http://localhost:6678/#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-2"><a href="http://localhost:6678/#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb2-3"><a href="http://localhost:6678/#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb2-4"><a href="http://localhost:6678/#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="http://localhost:6678/#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the CSV file into a DataFrame</span></span>
<span id="cb2-6"><a href="http://localhost:6678/#cb2-6" aria-hidden="true" tabindex="-1"></a>bus_routes <span class="op">=</span> pd.read_csv(<span class="st">'cta_br.csv'</span>)</span>
<span id="cb2-7"><a href="http://localhost:6678/#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="http://localhost:6678/#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Restrict the data to routes 171 and 172</span></span>
<span id="cb2-9"><a href="http://localhost:6678/#cb2-9" aria-hidden="true" tabindex="-1"></a>bus_routes <span class="op">=</span> bus_routes[bus_routes[<span class="st">'route'</span>].isin([<span class="st">'171'</span>, <span class="st">'172'</span>])].copy()</span>
<span id="cb2-10"><a href="http://localhost:6678/#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="http://localhost:6678/#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># From 2018 onwards</span></span>
<span id="cb2-12"><a href="http://localhost:6678/#cb2-12" aria-hidden="true" tabindex="-1"></a>bus_routes[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(bus_routes[<span class="st">'date'</span>])</span>
<span id="cb2-13"><a href="http://localhost:6678/#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="http://localhost:6678/#cb2-14" aria-hidden="true" tabindex="-1"></a>bus_routes <span class="op">=</span> bus_routes[bus_routes[<span class="st">'date'</span>] <span class="op">&gt;=</span> <span class="st">'2018-01-01'</span>]</span>
<span id="cb2-15"><a href="http://localhost:6678/#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="http://localhost:6678/#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb2-17"><a href="http://localhost:6678/#cb2-17" aria-hidden="true" tabindex="-1"></a>bus_routes.head()</span>
<span id="cb2-18"><a href="http://localhost:6678/#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="http://localhost:6678/#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of of observations</span></span>
<span id="cb2-20"><a href="http://localhost:6678/#cb2-20" aria-hidden="true" tabindex="-1"></a>row_count <span class="op">=</span> bus_routes.shape[<span class="dv">0</span>]</span>
<span id="cb2-21"><a href="http://localhost:6678/#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of rows: </span><span class="sc">{</span>row_count<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of rows: 4366</code></pre>
</div>
</div>
<ol start="2" type="1">
<li></li>
</ol>
<div id="28eea366" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="http://localhost:6678/#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract year and month</span></span>
<span id="cb4-2"><a href="http://localhost:6678/#cb4-2" aria-hidden="true" tabindex="-1"></a>bus_routes[<span class="st">'year'</span>] <span class="op">=</span> bus_routes[<span class="st">'date'</span>].dt.year</span>
<span id="cb4-3"><a href="http://localhost:6678/#cb4-3" aria-hidden="true" tabindex="-1"></a>bus_routes[<span class="st">'month'</span>] <span class="op">=</span> bus_routes[<span class="st">'date'</span>].dt.month</span>
<span id="cb4-4"><a href="http://localhost:6678/#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="http://localhost:6678/#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by year and month, and count rows</span></span>
<span id="cb4-6"><a href="http://localhost:6678/#cb4-6" aria-hidden="true" tabindex="-1"></a>cta_grouped <span class="op">=</span> bus_routes.groupby([<span class="st">'route'</span>, <span class="st">'date'</span>])[<span class="st">'rides'</span>].<span class="bu">sum</span>().reset_index(name<span class="op">=</span><span class="st">'rides'</span>) </span>
<span id="cb4-7"><a href="http://localhost:6678/#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="http://localhost:6678/#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># cta_grouped.to_csv('cta_seperate.csv' ,&nbsp;index&nbsp;=&nbsp;False)</span></span>
<span id="cb4-9"><a href="http://localhost:6678/#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="http://localhost:6678/#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># The data is uploaded daily for each of the routes, this is why the count is twice as much as the days in each month. </span></span>
<span id="cb4-11"><a href="http://localhost:6678/#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="http://localhost:6678/#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort the filtered data by the 'date' column</span></span>
<span id="cb4-13"><a href="http://localhost:6678/#cb4-13" aria-hidden="true" tabindex="-1"></a>bus_routes <span class="op">=</span> bus_routes.sort_values(by<span class="op">=</span><span class="st">'date'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li></li>
</ol>
<div id="2caacdae" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="http://localhost:6678/#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Taking the above code block, finding the average for each month, from 2018 to 2024, and plotting this.</span></span>
<span id="cb5-2"><a href="http://localhost:6678/#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="http://localhost:6678/#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="http://localhost:6678/#cb5-4" aria-hidden="true" tabindex="-1"></a>cta_grouped[<span class="st">"month"</span>] <span class="op">=</span> cta_grouped[<span class="st">"date"</span>].dt.month</span>
<span id="cb5-5"><a href="http://localhost:6678/#cb5-5" aria-hidden="true" tabindex="-1"></a>cta_grouped[<span class="st">"year"</span>] <span class="op">=</span> cta_grouped[<span class="st">"date"</span>].dt.year</span>
<span id="cb5-6"><a href="http://localhost:6678/#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="http://localhost:6678/#cb5-7" aria-hidden="true" tabindex="-1"></a>cta_grouped <span class="op">=</span> cta_grouped.groupby([<span class="st">"month"</span>, <span class="st">"year"</span>])[<span class="st">"rides"</span>].<span class="bu">sum</span>().reset_index(name <span class="op">=</span> <span class="st">"rides"</span>)</span>
<span id="cb5-8"><a href="http://localhost:6678/#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="http://localhost:6678/#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="http://localhost:6678/#cb5-10" aria-hidden="true" tabindex="-1"></a>average_ridership_list <span class="op">=</span> []</span>
<span id="cb5-11"><a href="http://localhost:6678/#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> month <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">1</span> <span class="op">+</span> <span class="bu">len</span>(cta_grouped[<span class="st">"month"</span>].unique())):</span>
<span id="cb5-12"><a href="http://localhost:6678/#cb5-12" aria-hidden="true" tabindex="-1"></a>    average_ridership <span class="op">=</span> cta_grouped[cta_grouped[<span class="st">"month"</span>] <span class="op">==</span> month]</span>
<span id="cb5-13"><a href="http://localhost:6678/#cb5-13" aria-hidden="true" tabindex="-1"></a>    average_ridership <span class="op">=</span> average_ridership[<span class="st">"rides"</span>].mean()</span>
<span id="cb5-14"><a href="http://localhost:6678/#cb5-14" aria-hidden="true" tabindex="-1"></a>    average_ridership_list.append(<span class="bu">round</span>(average_ridership, <span class="dv">2</span>))</span>
<span id="cb5-15"><a href="http://localhost:6678/#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="http://localhost:6678/#cb5-16" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> [<span class="st">"January"</span>, <span class="st">"February"</span>, <span class="st">"March"</span>, <span class="st">"April"</span>, <span class="st">"May"</span>, <span class="st">"June"</span>, <span class="st">"July"</span>, <span class="st">"August"</span>, <span class="st">"September"</span>, <span class="st">"October"</span>, <span class="st">"November"</span>, <span class="st">"December"</span>]</span>
<span id="cb5-17"><a href="http://localhost:6678/#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="http://localhost:6678/#cb5-18" aria-hidden="true" tabindex="-1"></a>average_ridership_df <span class="op">=</span> pd.DataFrame({<span class="st">"monthly_avg_riders"</span>: average_ridership_list,</span>
<span id="cb5-19"><a href="http://localhost:6678/#cb5-19" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">"month"</span>: months})</span>
<span id="cb5-20"><a href="http://localhost:6678/#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="http://localhost:6678/#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="http://localhost:6678/#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co"># making the bar graph</span></span>
<span id="cb5-23"><a href="http://localhost:6678/#cb5-23" aria-hidden="true" tabindex="-1"></a>bar_chart <span class="op">=</span> alt.Chart(average_ridership_df).mark_bar().encode(</span>
<span id="cb5-24"><a href="http://localhost:6678/#cb5-24" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>alt.X(<span class="st">'month:N'</span>, sort<span class="op">=</span>[<span class="st">'January'</span>, <span class="st">'February'</span>, <span class="st">'March'</span>, <span class="st">'April'</span>, <span class="st">'May'</span>, <span class="st">'June'</span>, <span class="st">'July'</span>, <span class="st">'August'</span>, <span class="st">'September'</span>, <span class="st">'October'</span>, <span class="st">'November'</span>, <span class="st">'December'</span>]),  <span class="co"># Month on the X-axis</span></span>
<span id="cb5-25"><a href="http://localhost:6678/#cb5-25" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'monthly_avg_riders:Q'</span>,</span>
<span id="cb5-26"><a href="http://localhost:6678/#cb5-26" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb5-27"><a href="http://localhost:6678/#cb5-27" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">800</span>, </span>
<span id="cb5-28"><a href="http://localhost:6678/#cb5-28" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">400</span>  </span>
<span id="cb5-29"><a href="http://localhost:6678/#cb5-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-30"><a href="http://localhost:6678/#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-31"><a href="http://localhost:6678/#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="http://localhost:6678/#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co"># heatmap of month on x axis and year on y axis</span></span>
<span id="cb5-33"><a href="http://localhost:6678/#cb5-33" aria-hidden="true" tabindex="-1"></a>heatmap <span class="op">=</span> alt.Chart(cta_grouped).mark_rect().encode(</span>
<span id="cb5-34"><a href="http://localhost:6678/#cb5-34" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>alt.X(<span class="st">'month:O'</span>, title<span class="op">=</span><span class="st">'Month'</span>, sort<span class="op">=</span>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>]),</span>
<span id="cb5-35"><a href="http://localhost:6678/#cb5-35" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>alt.Y(<span class="st">'year:O'</span>, title<span class="op">=</span><span class="st">'Year'</span>), </span>
<span id="cb5-36"><a href="http://localhost:6678/#cb5-36" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> alt.Color(<span class="st">"rides"</span>)</span>
<span id="cb5-37"><a href="http://localhost:6678/#cb5-37" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb5-38"><a href="http://localhost:6678/#cb5-38" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">800</span>,</span>
<span id="cb5-39"><a href="http://localhost:6678/#cb5-39" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">400</span></span>
<span id="cb5-40"><a href="http://localhost:6678/#cb5-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-41"><a href="http://localhost:6678/#cb5-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-42"><a href="http://localhost:6678/#cb5-42" aria-hidden="true" tabindex="-1"></a>bar_chart <span class="op">|</span> heatmap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">

<style>
  #altair-viz-55bef59f3c80483494c542cf27ef3907.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-55bef59f3c80483494c542cf27ef3907.vega-embed details,
  #altair-viz-55bef59f3c80483494c542cf27ef3907.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-55bef59f3c80483494c542cf27ef3907" class="vega-embed has-actions"><div class="chart-wrapper" role="graphics-document" aria-roledescription="visualization" aria-label="Vega visualization" style="cursor: default;"><canvas width="1799" height="488" class="marks"></canvas><form class="vega-bindings"></form></div><details title="Click to view actions"><summary>
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg></summary><div class="vega-actions"><a href="http://localhost:6678/#" target="_blank" download="visualization.svg">Save as SVG</a><a href="http://localhost:6678/#" target="_blank" download="visualization.png">Save as PNG</a><a href="http://localhost:6678/#">View Source</a><a href="http://localhost:6678/#">View Compiled Vega</a><a href="http://localhost:6678/#">Open in Vega Editor</a></div></details></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-55bef59f3c80483494c542cf27ef3907") {
      outputDiv = document.getElementById("altair-viz-55bef59f3c80483494c542cf27ef3907");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "hconcat": [{"data": {"name": "data-c1a845a34ad131bb996676b77dcb0be0"}, "mark": {"type": "bar"}, "encoding": {"x": {"field": "month", "sort": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], "type": "nominal"}, "y": {"field": "monthly_avg_riders", "type": "quantitative"}}, "height": 400, "width": 800}, {"data": {"name": "data-16ee0ee295089cf50dba16f5c4e03890"}, "mark": {"type": "rect"}, "encoding": {"color": {"field": "rides", "type": "quantitative"}, "x": {"field": "month", "sort": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "title": "Month", "type": "ordinal"}, "y": {"field": "year", "title": "Year", "type": "ordinal"}}, "height": 400, "width": 800}], "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-c1a845a34ad131bb996676b77dcb0be0": [{"monthly_avg_riders": 59738.86, "month": "January"}, {"monthly_avg_riders": 61099.43, "month": "February"}, {"monthly_avg_riders": 52487.86, "month": "March"}, {"monthly_avg_riders": 52584.0, "month": "April"}, {"monthly_avg_riders": 49431.71, "month": "May"}, {"monthly_avg_riders": 20879.0, "month": "June"}, {"monthly_avg_riders": 12663.71, "month": "July"}, {"monthly_avg_riders": 15146.14, "month": "August"}, {"monthly_avg_riders": 34764.33, "month": "September"}, {"monthly_avg_riders": 65539.83, "month": "October"}, {"monthly_avg_riders": 54531.67, "month": "November"}, {"monthly_avg_riders": 33533.33, "month": "December"}], "data-16ee0ee295089cf50dba16f5c4e03890": [{"month": 1, "year": 2018, "rides": 86799}, {"month": 1, "year": 2019, "rides": 79295}, {"month": 1, "year": 2020, "rides": 85219}, {"month": 1, "year": 2021, "rides": 12151}, {"month": 1, "year": 2022, "rides": 38988}, {"month": 1, "year": 2023, "rides": 58932}, {"month": 1, "year": 2024, "rides": 56788}, {"month": 2, "year": 2018, "rides": 71904}, {"month": 2, "year": 2019, "rides": 82702}, {"month": 2, "year": 2020, "rides": 83837}, {"month": 2, "year": 2021, "rides": 15826}, {"month": 2, "year": 2022, "rides": 56090}, {"month": 2, "year": 2023, "rides": 64326}, {"month": 2, "year": 2024, "rides": 53011}, {"month": 3, "year": 2018, "rides": 76806}, {"month": 3, "year": 2019, "rides": 68813}, {"month": 3, "year": 2020, "rides": 45512}, {"month": 3, "year": 2021, "rides": 15737}, {"month": 3, "year": 2022, "rides": 55926}, {"month": 3, "year": 2023, "rides": 55458}, {"month": 3, "year": 2024, "rides": 49163}, {"month": 4, "year": 2018, "rides": 84029}, {"month": 4, "year": 2019, "rides": 85297}, {"month": 4, "year": 2020, "rides": 4933}, {"month": 4, "year": 2021, "rides": 15921}, {"month": 4, "year": 2022, "rides": 53558}, {"month": 4, "year": 2023, "rides": 61363}, {"month": 4, "year": 2024, "rides": 62987}, {"month": 5, "year": 2018, "rides": 76746}, {"month": 5, "year": 2019, "rides": 84677}, {"month": 5, "year": 2020, "rides": 4468}, {"month": 5, "year": 2021, "rides": 16560}, {"month": 5, "year": 2022, "rides": 54684}, {"month": 5, "year": 2023, "rides": 55380}, {"month": 5, "year": 2024, "rides": 53507}, {"month": 6, "year": 2018, "rides": 34373}, {"month": 6, "year": 2019, "rides": 38357}, {"month": 6, "year": 2020, "rides": 4023}, {"month": 6, "year": 2021, "rides": 11925}, {"month": 6, "year": 2022, "rides": 19929}, {"month": 6, "year": 2023, "rides": 21560}, {"month": 6, "year": 2024, "rides": 15986}, {"month": 7, "year": 2018, "rides": 18059}, {"month": 7, "year": 2019, "rides": 17877}, {"month": 7, "year": 2020, "rides": 1653}, {"month": 7, "year": 2021, "rides": 5857}, {"month": 7, "year": 2022, "rides": 10447}, {"month": 7, "year": 2023, "rides": 23073}, {"month": 7, "year": 2024, "rides": 11680}, {"month": 8, "year": 2018, "rides": 19755}, {"month": 8, "year": 2019, "rides": 15802}, {"month": 8, "year": 2020, "rides": 1860}, {"month": 8, "year": 2021, "rides": 6282}, {"month": 8, "year": 2022, "rides": 17221}, {"month": 8, "year": 2023, "rides": 28112}, {"month": 8, "year": 2024, "rides": 16991}, {"month": 9, "year": 2018, "rides": 46320}, {"month": 9, "year": 2019, "rides": 47574}, {"month": 9, "year": 2020, "rides": 7044}, {"month": 9, "year": 2021, "rides": 27171}, {"month": 9, "year": 2022, "rides": 42059}, {"month": 9, "year": 2023, "rides": 38418}, {"month": 10, "year": 2018, "rides": 95181}, {"month": 10, "year": 2019, "rides": 94919}, {"month": 10, "year": 2020, "rides": 12617}, {"month": 10, "year": 2021, "rides": 63383}, {"month": 10, "year": 2022, "rides": 68190}, {"month": 10, "year": 2023, "rides": 58949}, {"month": 11, "year": 2018, "rides": 87670}, {"month": 11, "year": 2019, "rides": 81649}, {"month": 11, "year": 2020, "rides": 10575}, {"month": 11, "year": 2021, "rides": 51060}, {"month": 11, "year": 2022, "rides": 48761}, {"month": 11, "year": 2023, "rides": 47475}, {"month": 12, "year": 2018, "rides": 52254}, {"month": 12, "year": 2019, "rides": 52359}, {"month": 12, "year": 2020, "rides": 9383}, {"month": 12, "year": 2021, "rides": 28592}, {"month": 12, "year": 2022, "rides": 30599}, {"month": 12, "year": 2023, "rides": 28013}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
<ol start="4" type="1">
<li>Divvy ridership</li>
</ol>
<div id="5e205d66" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="http://localhost:6678/#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb6-2"><a href="http://localhost:6678/#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Up to 2020, the information was uploaded quarterly, after this, it started to be uploaded monthly. Before merging the data, it is necessary to explore the data bases. </span></span>
<span id="cb6-3"><a href="http://localhost:6678/#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="http://localhost:6678/#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Quarterly data base:</span></span>
<span id="cb6-5"><a href="http://localhost:6678/#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">quarterly_sample = pd.read_csv('Divvy_Trips_2020_Q1.csv')</span></span>
<span id="cb6-6"><a href="http://localhost:6678/#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="http://localhost:6678/#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">print(quarterly_sample.head())</span></span>
<span id="cb6-8"><a href="http://localhost:6678/#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="http://localhost:6678/#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly data base:</span></span>
<span id="cb6-10"><a href="http://localhost:6678/#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">monthly_sample = pd.read_csv('FinalProject_DDBB/divvy_data/202004-divvy-tripdata.csv')</span></span>
<span id="cb6-11"><a href="http://localhost:6678/#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="http://localhost:6678/#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">print(monthly_sample.head())</span></span>
<span id="cb6-13"><a href="http://localhost:6678/#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="http://localhost:6678/#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>"\n# Up to 2020, the information was uploaded quarterly, after this, it started to be uploaded monthly. Before merging the data, it is necessary to explore the data bases. \n\n# Quarterly data base:\nquarterly_sample = pd.read_csv('Divvy_Trips_2020_Q1.csv')\n\nprint(quarterly_sample.head())\n\n# Monthly data base:\nmonthly_sample = pd.read_csv('FinalProject_DDBB/divvy_data/202004-divvy-tripdata.csv')\n\nprint(monthly_sample.head())\n\n"</code></pre>
</div>
</div>
<ol start="5" type="1">
<li></li>
</ol>
<div id="7a19465a" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="http://localhost:6678/#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb8-2"><a href="http://localhost:6678/#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> shape, Point</span>
<span id="cb8-3"><a href="http://localhost:6678/#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="http://localhost:6678/#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data base containing geometry information about Chicago</span></span>
<span id="cb8-5"><a href="http://localhost:6678/#cb8-5" aria-hidden="true" tabindex="-1"></a>chicago_areas <span class="op">=</span> pd.read_csv(<span class="st">'chicago_areas.csv'</span>) </span>
<span id="cb8-6"><a href="http://localhost:6678/#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="http://localhost:6678/#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Data base containing geographic information of Divvy docking stations</span></span>
<span id="cb8-8"><a href="http://localhost:6678/#cb8-8" aria-hidden="true" tabindex="-1"></a>stations_gdf <span class="op">=</span> gpd.read_file(<span class="st">'Divvy stations/divvy_stations.shp'</span>) </span>
<span id="cb8-9"><a href="http://localhost:6678/#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="http://localhost:6678/#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure the shapefile has a valid CRS</span></span>
<span id="cb8-11"><a href="http://localhost:6678/#cb8-11" aria-hidden="true" tabindex="-1"></a>stations_gdf <span class="op">=</span> stations_gdf.to_crs(<span class="st">"EPSG:4326"</span>) </span>
<span id="cb8-12"><a href="http://localhost:6678/#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="http://localhost:6678/#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the geometry column in chicago_areas to shapely geometry to make it compatible with the station_gdf df. </span></span>
<span id="cb8-14"><a href="http://localhost:6678/#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="http://localhost:6678/#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.wkt <span class="im">import</span> loads</span>
<span id="cb8-16"><a href="http://localhost:6678/#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="http://localhost:6678/#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the 'geometry' column to actual shapely geometry</span></span>
<span id="cb8-18"><a href="http://localhost:6678/#cb8-18" aria-hidden="true" tabindex="-1"></a>chicago_areas[<span class="st">'the_geom'</span>] <span class="op">=</span> chicago_areas[<span class="st">'the_geom'</span>].<span class="bu">apply</span>(loads)</span>
<span id="cb8-19"><a href="http://localhost:6678/#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="http://localhost:6678/#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to a GeoDataFrame</span></span>
<span id="cb8-21"><a href="http://localhost:6678/#cb8-21" aria-hidden="true" tabindex="-1"></a>chicago_areas <span class="op">=</span> gpd.GeoDataFrame(chicago_areas, geometry<span class="op">=</span><span class="st">'the_geom'</span>, crs<span class="op">=</span><span class="st">"EPSG:4326"</span>)</span>
<span id="cb8-22"><a href="http://localhost:6678/#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="http://localhost:6678/#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Limit geographic location to Hyde Park</span></span>
<span id="cb8-24"><a href="http://localhost:6678/#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="http://localhost:6678/#cb8-25" aria-hidden="true" tabindex="-1"></a>hyde_park <span class="op">=</span> chicago_areas[chicago_areas[<span class="st">'COMMUNITY'</span>] <span class="op">==</span> <span class="st">'HYDE PARK'</span>]</span>
<span id="cb8-26"><a href="http://localhost:6678/#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="http://localhost:6678/#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform spatial joint to print the name of the Divvy Stations in Hyde Park</span></span>
<span id="cb8-28"><a href="http://localhost:6678/#cb8-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-29"><a href="http://localhost:6678/#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure both GeoDataFrames have the same CRS</span></span>
<span id="cb8-30"><a href="http://localhost:6678/#cb8-30" aria-hidden="true" tabindex="-1"></a>stations_gdf <span class="op">=</span> stations_gdf.to_crs(hyde_park.crs)</span>
<span id="cb8-31"><a href="http://localhost:6678/#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="http://localhost:6678/#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform spatial join</span></span>
<span id="cb8-33"><a href="http://localhost:6678/#cb8-33" aria-hidden="true" tabindex="-1"></a>stations_in_hp <span class="op">=</span> gpd.sjoin(stations_gdf, hyde_park, predicate<span class="op">=</span><span class="st">'within'</span>)</span>
<span id="cb8-34"><a href="http://localhost:6678/#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="http://localhost:6678/#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="co"># View and save results</span></span>
<span id="cb8-36"><a href="http://localhost:6678/#cb8-36" aria-hidden="true" tabindex="-1"></a>stations_in_hp.to_file(<span class="st">'stations_in_area.shp'</span>)</span>
<span id="cb8-37"><a href="http://localhost:6678/#cb8-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-38"><a href="http://localhost:6678/#cb8-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the name of the bike stations</span></span>
<span id="cb8-39"><a href="http://localhost:6678/#cb8-39" aria-hidden="true" tabindex="-1"></a>unique_stations <span class="op">=</span> stations_in_hp[<span class="st">'station_na'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\danie\AppData\Local\Temp\ipykernel_8984\611481945.py:36: UserWarning: Column names longer than 10 characters will be truncated when saved to ESRI Shapefile.
  stations_in_hp.to_file('stations_in_area.shp')
C:\Users\danie\AppData\Local\Programs\Python\Python312\Lib\site-packages\pyogrio\raw.py:723: RuntimeWarning: Normalized/laundered field name: 'index_right' to 'index_righ'
  ogr_write(</code></pre>
</div>
</div>
<ol start="6" type="1">
<li></li>
</ol>
<p>6.1.</p>
</section>
<section id="this-chunk-was-commented-out-to-speed-up-the-knitting-process." class="level2">
<h2 class="anchored" data-anchor-id="this-chunk-was-commented-out-to-speed-up-the-knitting-process.">This chunk was commented out to speed up the knitting process.<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6678/#this-chunk-was-commented-out-to-speed-up-the-knitting-process." style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div id="1a3ec927" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="http://localhost:6678/#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb10-2"><a href="http://localhost:6678/#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Monthly_data</span></span>
<span id="cb10-3"><a href="http://localhost:6678/#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="http://localhost:6678/#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Name the folder that contains all the quarterly and monthly information of divvy trips</span></span>
<span id="cb10-5"><a href="http://localhost:6678/#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">folder_path = 'divvy_data'</span></span>
<span id="cb10-6"><a href="http://localhost:6678/#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="http://localhost:6678/#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># List of unique stations in Hyde Park</span></span>
<span id="cb10-8"><a href="http://localhost:6678/#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">unique_stations = ['Cornell Ave &amp; Hyde Park Blvd', 'Griffin Museum of Science and Industry', </span></span>
<span id="cb10-9"><a href="http://localhost:6678/#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">'Blackstone Ave &amp; 59th St' 'Ellis Ave &amp; 58th St', 'University Ave &amp; 59th St','University Ave &amp; 57th St', </span></span>
<span id="cb10-10"><a href="http://localhost:6678/#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">'Ellis Ave &amp; 53rd St','Lake Park Ave &amp; 53rd St','Lake Park Ave &amp; 56th St', 'Ellis Ave &amp; 55th St',</span></span>
<span id="cb10-11"><a href="http://localhost:6678/#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">'Harper Ave &amp; 59th St','Woodlawn Ave &amp; 55th St', 'Kimbark Ave &amp; 53rd St','Woodlawn Ave &amp; 58th St',</span></span>
<span id="cb10-12"><a href="http://localhost:6678/#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">'Shore Dr &amp; 55th St']</span></span>
<span id="cb10-13"><a href="http://localhost:6678/#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="http://localhost:6678/#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># List to hold the filtered DataFrames</span></span>
<span id="cb10-15"><a href="http://localhost:6678/#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">filtered_data = []</span></span>
<span id="cb10-16"><a href="http://localhost:6678/#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="http://localhost:6678/#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through all files in the folder</span></span>
<span id="cb10-18"><a href="http://localhost:6678/#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">for file_name in os.listdir(folder_path):</span></span>
<span id="cb10-19"><a href="http://localhost:6678/#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">    # Ensure only CSV files are processed</span></span>
<span id="cb10-20"><a href="http://localhost:6678/#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">    if file_name.endswith('.csv'):</span></span>
<span id="cb10-21"><a href="http://localhost:6678/#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">        file_path = os.path.join(folder_path, file_name)</span></span>
<span id="cb10-22"><a href="http://localhost:6678/#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb10-23"><a href="http://localhost:6678/#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">        # Read the current CSV file</span></span>
<span id="cb10-24"><a href="http://localhost:6678/#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">        df = pd.read_csv(file_path)</span></span>
<span id="cb10-25"><a href="http://localhost:6678/#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb10-26"><a href="http://localhost:6678/#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="co">        # Check if 'start_station_name' and 'end_station_name' columns exist</span></span>
<span id="cb10-27"><a href="http://localhost:6678/#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co">        if {'start_station_name', 'end_station_name'}.issubset(df.columns):</span></span>
<span id="cb10-28"><a href="http://localhost:6678/#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co">            # Filter rows where both start and end stations are in unique_stations</span></span>
<span id="cb10-29"><a href="http://localhost:6678/#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co">            filtered_df = df[</span></span>
<span id="cb10-30"><a href="http://localhost:6678/#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co">                df['start_station_name'].isin(unique_stations) &amp; </span></span>
<span id="cb10-31"><a href="http://localhost:6678/#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="co">                df['end_station_name'].isin(unique_stations)</span></span>
<span id="cb10-32"><a href="http://localhost:6678/#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="co">            ]</span></span>
<span id="cb10-33"><a href="http://localhost:6678/#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="co">            </span></span>
<span id="cb10-34"><a href="http://localhost:6678/#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="co">            # Append the filtered DataFrame to the list</span></span>
<span id="cb10-35"><a href="http://localhost:6678/#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="co">            filtered_data.append(filtered_df)</span></span>
<span id="cb10-36"><a href="http://localhost:6678/#cb10-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-37"><a href="http://localhost:6678/#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all filtered DataFrames into one</span></span>
<span id="cb10-38"><a href="http://localhost:6678/#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="co">if filtered_data:</span></span>
<span id="cb10-39"><a href="http://localhost:6678/#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="co">    monthly_divvy_df = pd.concat(filtered_data, ignore_index=True)</span></span>
<span id="cb10-40"><a href="http://localhost:6678/#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="co">    print("All files have been processed and merged.")</span></span>
<span id="cb10-41"><a href="http://localhost:6678/#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb10-42"><a href="http://localhost:6678/#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="co">    # Save the final merged DataFrame to a new CSV</span></span>
<span id="cb10-43"><a href="http://localhost:6678/#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="co">    monthly_divvy_df.to_csv('Monthly_Bike_Trips.csv', index=False)</span></span>
<span id="cb10-44"><a href="http://localhost:6678/#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="co">    print("Filtered data saved to 'Monthly_Bike_Trips.csv'.")</span></span>
<span id="cb10-45"><a href="http://localhost:6678/#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="co">else:</span></span>
<span id="cb10-46"><a href="http://localhost:6678/#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="co">    print("No data was filtered or no files were processed.")</span></span>
<span id="cb10-47"><a href="http://localhost:6678/#cb10-47" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>'\n#Monthly_data\n\n# Name the folder that contains all the quarterly and monthly information of divvy trips\nfolder_path = \'divvy_data\'\n\n# List of unique stations in Hyde Park\nunique_stations = [\'Cornell Ave &amp; Hyde Park Blvd\', \'Griffin Museum of Science and Industry\', \n\'Blackstone Ave &amp; 59th St\' \'Ellis Ave &amp; 58th St\', \'University Ave &amp; 59th St\',\'University Ave &amp; 57th St\', \n\'Ellis Ave &amp; 53rd St\',\'Lake Park Ave &amp; 53rd St\',\'Lake Park Ave &amp; 56th St\', \'Ellis Ave &amp; 55th St\',\n\'Harper Ave &amp; 59th St\',\'Woodlawn Ave &amp; 55th St\', \'Kimbark Ave &amp; 53rd St\',\'Woodlawn Ave &amp; 58th St\',\n\'Shore Dr &amp; 55th St\']\n\n# List to hold the filtered DataFrames\nfiltered_data = []\n\n# Loop through all files in the folder\nfor file_name in os.listdir(folder_path):\n    # Ensure only CSV files are processed\n    if file_name.endswith(\'.csv\'):\n        file_path = os.path.join(folder_path, file_name)\n        \n        # Read the current CSV file\n        df = pd.read_csv(file_path)\n        \n        # Check if \'start_station_name\' and \'end_station_name\' columns exist\n        if {\'start_station_name\', \'end_station_name\'}.issubset(df.columns):\n            # Filter rows where both start and end stations are in unique_stations\n            filtered_df = df[\n                df[\'start_station_name\'].isin(unique_stations) &amp; \n                df[\'end_station_name\'].isin(unique_stations)\n            ]\n            \n            # Append the filtered DataFrame to the list\n            filtered_data.append(filtered_df)\n\n# Combine all filtered DataFrames into one\nif filtered_data:\n    monthly_divvy_df = pd.concat(filtered_data, ignore_index=True)\n    print("All files have been processed and merged.")\n    \n    # Save the final merged DataFrame to a new CSV\n    monthly_divvy_df.to_csv(\'Monthly_Bike_Trips.csv\', index=False)\n    print("Filtered data saved to \'Monthly_Bike_Trips.csv\'.")\nelse:\n    print("No data was filtered or no files were processed.")\n'</code></pre>
</div>
</div>
<p>6.2.</p>
</section>
<section id="this-chunk-was-commented-out-to-speed-up-the-knitting-process.-1" class="level2">
<h2 class="anchored" data-anchor-id="this-chunk-was-commented-out-to-speed-up-the-knitting-process.-1">This chunk was commented out to speed up the knitting process.<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6678/#this-chunk-was-commented-out-to-speed-up-the-knitting-process.-1" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div id="c6ca6893" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="http://localhost:6678/#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb12-2"><a href="http://localhost:6678/#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Quarterly</span></span>
<span id="cb12-3"><a href="http://localhost:6678/#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Name the folder that contains all the quarterly and monthly information of divvy trips</span></span>
<span id="cb12-4"><a href="http://localhost:6678/#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">folder_path = 'divvy_data'</span></span>
<span id="cb12-5"><a href="http://localhost:6678/#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="http://localhost:6678/#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># List of unique stations in Hyde Park</span></span>
<span id="cb12-7"><a href="http://localhost:6678/#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">unique_stations = ['Cornell Ave &amp; Hyde Park Blvd', 'Griffin Museum of Science and Industry', </span></span>
<span id="cb12-8"><a href="http://localhost:6678/#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">'Blackstone Ave &amp; 59th St', 'Ellis Ave &amp; 58th St', 'University Ave &amp; 59th St','University Ave &amp; 57th St', </span></span>
<span id="cb12-9"><a href="http://localhost:6678/#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">'Ellis Ave &amp; 53rd St','Lake Park Ave &amp; 53rd St','Lake Park Ave &amp; 56th St', 'Ellis Ave &amp; 55th St',</span></span>
<span id="cb12-10"><a href="http://localhost:6678/#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">'Harper Ave &amp; 59th St','Woodlawn Ave &amp; 55th St', 'Kimbark Ave &amp; 53rd St','Woodlawn Ave &amp; 58th St',</span></span>
<span id="cb12-11"><a href="http://localhost:6678/#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">'Shore Dr &amp; 55th St']</span></span>
<span id="cb12-12"><a href="http://localhost:6678/#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="http://localhost:6678/#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># List to hold the filtered DataFrames</span></span>
<span id="cb12-14"><a href="http://localhost:6678/#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">filtered_data = []</span></span>
<span id="cb12-15"><a href="http://localhost:6678/#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="http://localhost:6678/#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through all files in the folder</span></span>
<span id="cb12-17"><a href="http://localhost:6678/#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">for file_name in os.listdir(folder_path):</span></span>
<span id="cb12-18"><a href="http://localhost:6678/#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">    # Ensure only CSV files are processed</span></span>
<span id="cb12-19"><a href="http://localhost:6678/#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">    if file_name.endswith('.csv'):</span></span>
<span id="cb12-20"><a href="http://localhost:6678/#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co">        file_path = os.path.join(folder_path, file_name)</span></span>
<span id="cb12-21"><a href="http://localhost:6678/#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb12-22"><a href="http://localhost:6678/#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co">        # Read the current CSV file</span></span>
<span id="cb12-23"><a href="http://localhost:6678/#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co">        df = pd.read_csv(file_path)</span></span>
<span id="cb12-24"><a href="http://localhost:6678/#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb12-25"><a href="http://localhost:6678/#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="co">        # Check if 'from_station_name' and 'to_station_name' columns exist</span></span>
<span id="cb12-26"><a href="http://localhost:6678/#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="co">        if {'from_station_name', 'to_station_name'}.issubset(df.columns):</span></span>
<span id="cb12-27"><a href="http://localhost:6678/#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="co">            # Filter rows where both start and end stations are in unique_stations</span></span>
<span id="cb12-28"><a href="http://localhost:6678/#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="co">            filtered_df = df[</span></span>
<span id="cb12-29"><a href="http://localhost:6678/#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="co">                df['from_station_name'].isin(unique_stations) &amp; </span></span>
<span id="cb12-30"><a href="http://localhost:6678/#cb12-30" aria-hidden="true" tabindex="-1"></a><span class="co">                df['to_station_name'].isin(unique_stations)</span></span>
<span id="cb12-31"><a href="http://localhost:6678/#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="co">            ]</span></span>
<span id="cb12-32"><a href="http://localhost:6678/#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="co">            </span></span>
<span id="cb12-33"><a href="http://localhost:6678/#cb12-33" aria-hidden="true" tabindex="-1"></a><span class="co">            # Append the filtered DataFrame to the list</span></span>
<span id="cb12-34"><a href="http://localhost:6678/#cb12-34" aria-hidden="true" tabindex="-1"></a><span class="co">            filtered_data.append(filtered_df)</span></span>
<span id="cb12-35"><a href="http://localhost:6678/#cb12-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-36"><a href="http://localhost:6678/#cb12-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all filtered DataFrames into one</span></span>
<span id="cb12-37"><a href="http://localhost:6678/#cb12-37" aria-hidden="true" tabindex="-1"></a><span class="co">if filtered_data:</span></span>
<span id="cb12-38"><a href="http://localhost:6678/#cb12-38" aria-hidden="true" tabindex="-1"></a><span class="co">    divvy_df = pd.concat(filtered_data, ignore_index=True)</span></span>
<span id="cb12-39"><a href="http://localhost:6678/#cb12-39" aria-hidden="true" tabindex="-1"></a><span class="co">    print("All files have been processed and merged.")</span></span>
<span id="cb12-40"><a href="http://localhost:6678/#cb12-40" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb12-41"><a href="http://localhost:6678/#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="co">    # Save the final merged DataFrame to a new CSV</span></span>
<span id="cb12-42"><a href="http://localhost:6678/#cb12-42" aria-hidden="true" tabindex="-1"></a><span class="co">    divvy_df.to_csv('Quarterly_Bike_Trips.csv', index=False)</span></span>
<span id="cb12-43"><a href="http://localhost:6678/#cb12-43" aria-hidden="true" tabindex="-1"></a><span class="co">    print("Filtered data saved to 'Quarterly_Bike_Trips.csv'.")</span></span>
<span id="cb12-44"><a href="http://localhost:6678/#cb12-44" aria-hidden="true" tabindex="-1"></a><span class="co">else:</span></span>
<span id="cb12-45"><a href="http://localhost:6678/#cb12-45" aria-hidden="true" tabindex="-1"></a><span class="co">    print("No data was filtered or no files were processed.")</span></span>
<span id="cb12-46"><a href="http://localhost:6678/#cb12-46" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>'\n#Quarterly\n# Name the folder that contains all the quarterly and monthly information of divvy trips\nfolder_path = \'divvy_data\'\n\n# List of unique stations in Hyde Park\nunique_stations = [\'Cornell Ave &amp; Hyde Park Blvd\', \'Griffin Museum of Science and Industry\', \n\'Blackstone Ave &amp; 59th St\', \'Ellis Ave &amp; 58th St\', \'University Ave &amp; 59th St\',\'University Ave &amp; 57th St\', \n\'Ellis Ave &amp; 53rd St\',\'Lake Park Ave &amp; 53rd St\',\'Lake Park Ave &amp; 56th St\', \'Ellis Ave &amp; 55th St\',\n\'Harper Ave &amp; 59th St\',\'Woodlawn Ave &amp; 55th St\', \'Kimbark Ave &amp; 53rd St\',\'Woodlawn Ave &amp; 58th St\',\n\'Shore Dr &amp; 55th St\']\n\n# List to hold the filtered DataFrames\nfiltered_data = []\n\n# Loop through all files in the folder\nfor file_name in os.listdir(folder_path):\n    # Ensure only CSV files are processed\n    if file_name.endswith(\'.csv\'):\n        file_path = os.path.join(folder_path, file_name)\n        \n        # Read the current CSV file\n        df = pd.read_csv(file_path)\n        \n        # Check if \'from_station_name\' and \'to_station_name\' columns exist\n        if {\'from_station_name\', \'to_station_name\'}.issubset(df.columns):\n            # Filter rows where both start and end stations are in unique_stations\n            filtered_df = df[\n                df[\'from_station_name\'].isin(unique_stations) &amp; \n                df[\'to_station_name\'].isin(unique_stations)\n            ]\n            \n            # Append the filtered DataFrame to the list\n            filtered_data.append(filtered_df)\n\n# Combine all filtered DataFrames into one\nif filtered_data:\n    divvy_df = pd.concat(filtered_data, ignore_index=True)\n    print("All files have been processed and merged.")\n    \n    # Save the final merged DataFrame to a new CSV\n    divvy_df.to_csv(\'Quarterly_Bike_Trips.csv\', index=False)\n    print("Filtered data saved to \'Quarterly_Bike_Trips.csv\'.")\nelse:\n    print("No data was filtered or no files were processed.")\n'</code></pre>
</div>
</div>
<p>6.3.</p>
</section>
<section id="this-chunk-was-commented-out-to-speed-up-the-knitting-process.-2" class="level2">
<h2 class="anchored" data-anchor-id="this-chunk-was-commented-out-to-speed-up-the-knitting-process.-2">This chunk was commented out to speed up the knitting process.<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6678/#this-chunk-was-commented-out-to-speed-up-the-knitting-process.-2" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div id="4bd46526" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="http://localhost:6678/#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb14-2"><a href="http://localhost:6678/#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Quarterly 2. Two of the data sets have different column names</span></span>
<span id="cb14-3"><a href="http://localhost:6678/#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="http://localhost:6678/#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Name the folder that contains all the quarterly and monthly information of divvy trips</span></span>
<span id="cb14-5"><a href="http://localhost:6678/#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">folder_path = 'divvy_data'</span></span>
<span id="cb14-6"><a href="http://localhost:6678/#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="http://localhost:6678/#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># List of unique stations in Hyde Park</span></span>
<span id="cb14-8"><a href="http://localhost:6678/#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">unique_stations = ['Cornell Ave &amp; Hyde Park Blvd', 'Griffin Museum of Science and Industry', </span></span>
<span id="cb14-9"><a href="http://localhost:6678/#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">'Blackstone Ave &amp; 59th St', 'Ellis Ave &amp; 58th St', 'University Ave &amp; 59th St','University Ave &amp; 57th St', </span></span>
<span id="cb14-10"><a href="http://localhost:6678/#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">'Ellis Ave &amp; 53rd St','Lake Park Ave &amp; 53rd St','Lake Park Ave &amp; 56th St', 'Ellis Ave &amp; 55th St',</span></span>
<span id="cb14-11"><a href="http://localhost:6678/#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">'Harper Ave &amp; 59th St','Woodlawn Ave &amp; 55th St', 'Kimbark Ave &amp; 53rd St','Woodlawn Ave &amp; 58th St',</span></span>
<span id="cb14-12"><a href="http://localhost:6678/#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">'Shore Dr &amp; 55th St']</span></span>
<span id="cb14-13"><a href="http://localhost:6678/#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="http://localhost:6678/#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co"># List to hold the filtered DataFrames</span></span>
<span id="cb14-15"><a href="http://localhost:6678/#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">filtered_data = []</span></span>
<span id="cb14-16"><a href="http://localhost:6678/#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="http://localhost:6678/#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through all files in the folder</span></span>
<span id="cb14-18"><a href="http://localhost:6678/#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co">for file_name in os.listdir(folder_path):</span></span>
<span id="cb14-19"><a href="http://localhost:6678/#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co">    # Ensure only CSV files are processed</span></span>
<span id="cb14-20"><a href="http://localhost:6678/#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co">    if file_name.endswith('.csv'):</span></span>
<span id="cb14-21"><a href="http://localhost:6678/#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co">        file_path = os.path.join(folder_path, file_name)</span></span>
<span id="cb14-22"><a href="http://localhost:6678/#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb14-23"><a href="http://localhost:6678/#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co">        # Read the current CSV file</span></span>
<span id="cb14-24"><a href="http://localhost:6678/#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co">        df = pd.read_csv(file_path)</span></span>
<span id="cb14-25"><a href="http://localhost:6678/#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb14-26"><a href="http://localhost:6678/#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co">        # Check if '03 - Rental Start Station Name' and '02 - Rental End Station Name' columns exist</span></span>
<span id="cb14-27"><a href="http://localhost:6678/#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co">        if {'03 - Rental Start Station Name', '02 - Rental End Station Name'}.issubset(df.columns):</span></span>
<span id="cb14-28"><a href="http://localhost:6678/#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co">            # Filter rows where both start and end stations are in unique_stations</span></span>
<span id="cb14-29"><a href="http://localhost:6678/#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">            filtered_df = df[</span></span>
<span id="cb14-30"><a href="http://localhost:6678/#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">                df['03 - Rental Start Station Name'].isin(unique_stations) &amp; </span></span>
<span id="cb14-31"><a href="http://localhost:6678/#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="co">                df['02 - Rental End Station Name'].isin(unique_stations)</span></span>
<span id="cb14-32"><a href="http://localhost:6678/#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co">            ]</span></span>
<span id="cb14-33"><a href="http://localhost:6678/#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="co">            </span></span>
<span id="cb14-34"><a href="http://localhost:6678/#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="co">            # Append the filtered DataFrame to the list</span></span>
<span id="cb14-35"><a href="http://localhost:6678/#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="co">            filtered_data.append(filtered_df)</span></span>
<span id="cb14-36"><a href="http://localhost:6678/#cb14-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-37"><a href="http://localhost:6678/#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all filtered DataFrames into one</span></span>
<span id="cb14-38"><a href="http://localhost:6678/#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co">if filtered_data:</span></span>
<span id="cb14-39"><a href="http://localhost:6678/#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="co">    divvy_df = pd.concat(filtered_data, ignore_index=True)</span></span>
<span id="cb14-40"><a href="http://localhost:6678/#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="co">    print("All files have been processed and merged.")</span></span>
<span id="cb14-41"><a href="http://localhost:6678/#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb14-42"><a href="http://localhost:6678/#cb14-42" aria-hidden="true" tabindex="-1"></a><span class="co">    # Save the final merged DataFrame to a new CSV</span></span>
<span id="cb14-43"><a href="http://localhost:6678/#cb14-43" aria-hidden="true" tabindex="-1"></a><span class="co">    divvy_df.to_csv('Quarterly_Bike_Trips_2.csv', index=False)</span></span>
<span id="cb14-44"><a href="http://localhost:6678/#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="co">    print("Filtered data saved to 'Quarterly_Bike_Trips_2.csv'.")</span></span>
<span id="cb14-45"><a href="http://localhost:6678/#cb14-45" aria-hidden="true" tabindex="-1"></a><span class="co">else:</span></span>
<span id="cb14-46"><a href="http://localhost:6678/#cb14-46" aria-hidden="true" tabindex="-1"></a><span class="co">    print("No data was filtered or no files were processed.")</span></span>
<span id="cb14-47"><a href="http://localhost:6678/#cb14-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-48"><a href="http://localhost:6678/#cb14-48" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>'\n#Quarterly 2. Two of the data sets have different column names\n\n# Name the folder that contains all the quarterly and monthly information of divvy trips\nfolder_path = \'divvy_data\'\n\n# List of unique stations in Hyde Park\nunique_stations = [\'Cornell Ave &amp; Hyde Park Blvd\', \'Griffin Museum of Science and Industry\', \n\'Blackstone Ave &amp; 59th St\', \'Ellis Ave &amp; 58th St\', \'University Ave &amp; 59th St\',\'University Ave &amp; 57th St\', \n\'Ellis Ave &amp; 53rd St\',\'Lake Park Ave &amp; 53rd St\',\'Lake Park Ave &amp; 56th St\', \'Ellis Ave &amp; 55th St\',\n\'Harper Ave &amp; 59th St\',\'Woodlawn Ave &amp; 55th St\', \'Kimbark Ave &amp; 53rd St\',\'Woodlawn Ave &amp; 58th St\',\n\'Shore Dr &amp; 55th St\']\n\n# List to hold the filtered DataFrames\nfiltered_data = []\n\n# Loop through all files in the folder\nfor file_name in os.listdir(folder_path):\n    # Ensure only CSV files are processed\n    if file_name.endswith(\'.csv\'):\n        file_path = os.path.join(folder_path, file_name)\n        \n        # Read the current CSV file\n        df = pd.read_csv(file_path)\n        \n        # Check if \'03 - Rental Start Station Name\' and \'02 - Rental End Station Name\' columns exist\n        if {\'03 - Rental Start Station Name\', \'02 - Rental End Station Name\'}.issubset(df.columns):\n            # Filter rows where both start and end stations are in unique_stations\n            filtered_df = df[\n                df[\'03 - Rental Start Station Name\'].isin(unique_stations) &amp; \n                df[\'02 - Rental End Station Name\'].isin(unique_stations)\n            ]\n            \n            # Append the filtered DataFrame to the list\n            filtered_data.append(filtered_df)\n\n# Combine all filtered DataFrames into one\nif filtered_data:\n    divvy_df = pd.concat(filtered_data, ignore_index=True)\n    print("All files have been processed and merged.")\n    \n    # Save the final merged DataFrame to a new CSV\n    divvy_df.to_csv(\'Quarterly_Bike_Trips_2.csv\', index=False)\n    print("Filtered data saved to \'Quarterly_Bike_Trips_2.csv\'.")\nelse:\n    print("No data was filtered or no files were processed.")\n\n'</code></pre>
</div>
</div>
<ol start="7" type="1">
<li></li>
</ol>
<div id="3d413d50" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="http://localhost:6678/#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This code cell is just naming the dataframes so that we can merge them later.</span></span>
<span id="cb16-2"><a href="http://localhost:6678/#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># In the Monthly data set, we care about the columns: 'started_at', 'ended_at', 'start_station_name', 'end_station_name'</span></span>
<span id="cb16-3"><a href="http://localhost:6678/#cb16-3" aria-hidden="true" tabindex="-1"></a>monthly_rides_dv <span class="op">=</span> pd.read_csv(<span class="st">'Monthly_Bike_Trips.csv'</span>)</span>
<span id="cb16-4"><a href="http://localhost:6678/#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="http://localhost:6678/#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># In the Quarterly 1 data set, we care about the columns: 'start_time', 'end_time', 'from_station_name', 'to_station_name'</span></span>
<span id="cb16-6"><a href="http://localhost:6678/#cb16-6" aria-hidden="true" tabindex="-1"></a>quarterly_rides_dv <span class="op">=</span> pd.read_csv(<span class="st">'Quarterly_Bike_Trips.csv'</span>)</span>
<span id="cb16-7"><a href="http://localhost:6678/#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="http://localhost:6678/#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># In the Quarterly 2 data set, we care about the columns: '01 - Rental Details Local Start Time', '01 - Rental Details Local End Time','03 - Rental Start Station Name', '02 - Rental End Station Name'</span></span>
<span id="cb16-9"><a href="http://localhost:6678/#cb16-9" aria-hidden="true" tabindex="-1"></a>quarterly_rides_dv_2 <span class="op">=</span> pd.read_csv(<span class="st">'Quarterly_Bike_Trips_2.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="8" type="1">
<li></li>
</ol>
<div id="00aab157" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="http://localhost:6678/#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># merging the quarterly data into one concat'd dataset</span></span>
<span id="cb17-2"><a href="http://localhost:6678/#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="http://localhost:6678/#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#creating dictionaries to prepare for renaming columns in relevant datasets.</span></span>
<span id="cb17-4"><a href="http://localhost:6678/#cb17-4" aria-hidden="true" tabindex="-1"></a>quarterly_rides_dv_2 <span class="op">=</span> quarterly_rides_dv_2.rename(columns <span class="op">=</span> {</span>
<span id="cb17-5"><a href="http://localhost:6678/#cb17-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"01 - Rental Details Local Start Time"</span> : <span class="st">"start_time"</span>,</span>
<span id="cb17-6"><a href="http://localhost:6678/#cb17-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"01 - Rental Details Local End Time"</span> : <span class="st">"end_time"</span>,</span>
<span id="cb17-7"><a href="http://localhost:6678/#cb17-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"03 - Rental Start Station Name"</span> : <span class="st">"from_station_name"</span>,</span>
<span id="cb17-8"><a href="http://localhost:6678/#cb17-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"02 - Rental End Station Name"</span> : <span class="st">"to_station_name"</span></span>
<span id="cb17-9"><a href="http://localhost:6678/#cb17-9" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-10"><a href="http://localhost:6678/#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="http://localhost:6678/#cb17-11" aria-hidden="true" tabindex="-1"></a>monthly_rides_dv <span class="op">=</span> monthly_rides_dv.rename(columns <span class="op">=</span> {</span>
<span id="cb17-12"><a href="http://localhost:6678/#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"started_at"</span> : <span class="st">"start_time"</span>,</span>
<span id="cb17-13"><a href="http://localhost:6678/#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ended_at"</span> : <span class="st">"end_time"</span>,</span>
<span id="cb17-14"><a href="http://localhost:6678/#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"start_station_name"</span> : <span class="st">"from_station_name"</span>,</span>
<span id="cb17-15"><a href="http://localhost:6678/#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"end_station_name"</span> : <span class="st">"to_station_name"</span></span>
<span id="cb17-16"><a href="http://localhost:6678/#cb17-16" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-17"><a href="http://localhost:6678/#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="http://localhost:6678/#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co">#matching all of the names of the datasets.</span></span>
<span id="cb17-19"><a href="http://localhost:6678/#cb17-19" aria-hidden="true" tabindex="-1"></a>quarterly_rides_dv_2 <span class="op">=</span> quarterly_rides_dv_2[[<span class="st">"start_time"</span>, <span class="st">"end_time"</span>, <span class="st">"from_station_name"</span>, <span class="st">"to_station_name"</span>]]</span>
<span id="cb17-20"><a href="http://localhost:6678/#cb17-20" aria-hidden="true" tabindex="-1"></a>quarterly_rides_dv <span class="op">=</span> quarterly_rides_dv[[<span class="st">"start_time"</span>, <span class="st">"end_time"</span>, <span class="st">"from_station_name"</span>, <span class="st">"to_station_name"</span>]]</span>
<span id="cb17-21"><a href="http://localhost:6678/#cb17-21" aria-hidden="true" tabindex="-1"></a>monthly_rides_dv <span class="op">=</span> monthly_rides_dv[[<span class="st">"start_time"</span>, <span class="st">"end_time"</span>, <span class="st">"from_station_name"</span>, <span class="st">"to_station_name"</span>]]</span>
<span id="cb17-22"><a href="http://localhost:6678/#cb17-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-23"><a href="http://localhost:6678/#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co">#creating one large dataset</span></span>
<span id="cb17-24"><a href="http://localhost:6678/#cb17-24" aria-hidden="true" tabindex="-1"></a>quarterly_rides <span class="op">=</span> pd.concat([quarterly_rides_dv, quarterly_rides_dv_2, monthly_rides_dv], axis <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb17-25"><a href="http://localhost:6678/#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="http://localhost:6678/#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co">#verifying that data is in correct format.</span></span>
<span id="cb17-27"><a href="http://localhost:6678/#cb17-27" aria-hidden="true" tabindex="-1"></a>quarterly_rides[<span class="st">'start_time'</span>] <span class="op">=</span> pd.to_datetime(quarterly_rides[<span class="st">"start_time"</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'mixed'</span>)</span>
<span id="cb17-28"><a href="http://localhost:6678/#cb17-28" aria-hidden="true" tabindex="-1"></a>quarterly_rides[<span class="st">"end_time"</span>] <span class="op">=</span> pd.to_datetime(quarterly_rides[<span class="st">"end_time"</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'mixed'</span>)</span>
<span id="cb17-29"><a href="http://localhost:6678/#cb17-29" aria-hidden="true" tabindex="-1"></a>quarterly_rides[<span class="st">'year_month'</span>] <span class="op">=</span> quarterly_rides[<span class="st">'start_time'</span>].dt.strftime(<span class="st">'%Y-%m'</span>)</span>
<span id="cb17-30"><a href="http://localhost:6678/#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="http://localhost:6678/#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by station and the year_month, and count the rides for each group</span></span>
<span id="cb17-32"><a href="http://localhost:6678/#cb17-32" aria-hidden="true" tabindex="-1"></a>rides_per_station_per_month <span class="op">=</span> quarterly_rides.groupby([<span class="st">'from_station_name'</span>, <span class="st">'year_month'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'ride_count'</span>)</span>
<span id="cb17-33"><a href="http://localhost:6678/#cb17-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-34"><a href="http://localhost:6678/#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result</span></span>
<span id="cb17-35"><a href="http://localhost:6678/#cb17-35" aria-hidden="true" tabindex="-1"></a>rides_per_station_per_month.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">from_station_name</th>
<th data-quarto-table-cell-role="th">year_month</th>
<th data-quarto-table-cell-role="th">ride_count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Cornell Ave &amp; Hyde Park Blvd</td>
<td>2018-01</td>
<td>98</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Cornell Ave &amp; Hyde Park Blvd</td>
<td>2018-02</td>
<td>94</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Cornell Ave &amp; Hyde Park Blvd</td>
<td>2018-03</td>
<td>164</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Cornell Ave &amp; Hyde Park Blvd</td>
<td>2018-04</td>
<td>203</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Cornell Ave &amp; Hyde Park Blvd</td>
<td>2018-05</td>
<td>375</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ol start="9" type="1">
<li></li>
</ol>
<div id="99f5e52f" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="http://localhost:6678/#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a year column</span></span>
<span id="cb18-2"><a href="http://localhost:6678/#cb18-2" aria-hidden="true" tabindex="-1"></a>rides_per_station_per_month[<span class="st">"year"</span>] <span class="op">=</span> pd.to_datetime(rides_per_station_per_month[<span class="st">'year_month'</span>]).dt.year</span>
<span id="cb18-3"><a href="http://localhost:6678/#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="http://localhost:6678/#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">#filtering for pre and post covid, for the purpose of visualizations</span></span>
<span id="cb18-5"><a href="http://localhost:6678/#cb18-5" aria-hidden="true" tabindex="-1"></a>rides_per_station_per_month_2017 <span class="op">=</span> rides_per_station_per_month[rides_per_station_per_month[<span class="st">"year"</span>] <span class="op">&lt;</span> <span class="dv">2020</span>]</span>
<span id="cb18-6"><a href="http://localhost:6678/#cb18-6" aria-hidden="true" tabindex="-1"></a>rides_per_station_per_month_2020 <span class="op">=</span> rides_per_station_per_month[rides_per_station_per_month[<span class="st">"year"</span>] <span class="op">&gt;=</span> <span class="dv">2020</span>]</span>
<span id="cb18-7"><a href="http://localhost:6678/#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="http://localhost:6678/#cb18-8" aria-hidden="true" tabindex="-1"></a>lasagna2017 <span class="op">=</span>  alt.Chart(rides_per_station_per_month_2017).mark_rect().encode(</span>
<span id="cb18-9"><a href="http://localhost:6678/#cb18-9" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>alt.X(<span class="st">'year_month:N'</span>, title<span class="op">=</span><span class="st">'Year-Month'</span>, sort<span class="op">=</span><span class="va">None</span>),  <span class="co"># X-axis: Year-Month</span></span>
<span id="cb18-10"><a href="http://localhost:6678/#cb18-10" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>alt.Y(<span class="st">'from_station_name:N'</span>, title<span class="op">=</span><span class="st">'Station Name'</span>),  <span class="co"># Y-axis: Station Name</span></span>
<span id="cb18-11"><a href="http://localhost:6678/#cb18-11" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>alt.Color(<span class="st">'ride_count:Q'</span>, scale<span class="op">=</span>alt.Scale(scheme<span class="op">=</span><span class="st">'blues'</span>), title<span class="op">=</span><span class="st">'Ride Count'</span>),  <span class="co"># Color based on the number of rides</span></span>
<span id="cb18-12"><a href="http://localhost:6678/#cb18-12" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb18-13"><a href="http://localhost:6678/#cb18-13" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">800</span>,</span>
<span id="cb18-14"><a href="http://localhost:6678/#cb18-14" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">400</span>,</span>
<span id="cb18-15"><a href="http://localhost:6678/#cb18-15" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Monthly Divvy Rides per Station pre Covid, Hyde Park"</span></span>
<span id="cb18-16"><a href="http://localhost:6678/#cb18-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-17"><a href="http://localhost:6678/#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="http://localhost:6678/#cb18-18" aria-hidden="true" tabindex="-1"></a>lasagna2020 <span class="op">=</span>  alt.Chart(rides_per_station_per_month_2020).mark_rect().encode(</span>
<span id="cb18-19"><a href="http://localhost:6678/#cb18-19" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>alt.X(<span class="st">'year_month:N'</span>, title<span class="op">=</span><span class="st">'Year-Month'</span>, sort<span class="op">=</span><span class="va">None</span>),  <span class="co"># X-axis: Year-Month</span></span>
<span id="cb18-20"><a href="http://localhost:6678/#cb18-20" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>alt.Y(<span class="st">'from_station_name:N'</span>, title<span class="op">=</span><span class="st">'Station Name'</span>),  <span class="co"># Y-axis: Station Name</span></span>
<span id="cb18-21"><a href="http://localhost:6678/#cb18-21" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>alt.Color(<span class="st">'ride_count:Q'</span>, scale<span class="op">=</span>alt.Scale(scheme<span class="op">=</span><span class="st">'blues'</span>), title<span class="op">=</span><span class="st">'Ride Count'</span>),  <span class="co"># Color based on the number of rides</span></span>
<span id="cb18-22"><a href="http://localhost:6678/#cb18-22" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb18-23"><a href="http://localhost:6678/#cb18-23" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">800</span>,</span>
<span id="cb18-24"><a href="http://localhost:6678/#cb18-24" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">400</span>,</span>
<span id="cb18-25"><a href="http://localhost:6678/#cb18-25" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Monthly Divvy Rides per Station post Covid, Hyde Park"</span></span>
<span id="cb18-26"><a href="http://localhost:6678/#cb18-26" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="48b74f9b" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="http://localhost:6678/#cb19-1" aria-hidden="true" tabindex="-1"></a>lasagna2017 <span class="op">|</span> lasagna2020</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">

<style>
  #altair-viz-09947c43f72d4f68ba9aa8619a514b52.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-09947c43f72d4f68ba9aa8619a514b52.vega-embed details,
  #altair-viz-09947c43f72d4f68ba9aa8619a514b52.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-09947c43f72d4f68ba9aa8619a514b52" class="vega-embed has-actions"><div class="chart-wrapper" role="graphics-document" aria-roledescription="visualization" aria-label="Vega visualization" style="cursor: default;"><canvas width="2022" height="488" class="marks"></canvas><form class="vega-bindings"></form></div><details title="Click to view actions"><summary>
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg></summary><div class="vega-actions"><a href="http://localhost:6678/#" target="_blank" download="visualization.svg">Save as SVG</a><a href="http://localhost:6678/#" target="_blank" download="visualization.png">Save as PNG</a><a href="http://localhost:6678/#">View Source</a><a href="http://localhost:6678/#">View Compiled Vega</a><a href="http://localhost:6678/#">Open in Vega Editor</a></div></details></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-09947c43f72d4f68ba9aa8619a514b52") {
      outputDiv = document.getElementById("altair-viz-09947c43f72d4f68ba9aa8619a514b52");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "hconcat": [{"data": {"name": "data-bdf1806b192749f586b9b561c3c3aba8"}, "mark": {"type": "rect"}, "encoding": {"color": {"field": "ride_count", "scale": {"scheme": "blues"}, "title": "Ride Count", "type": "quantitative"}, "x": {"field": "year_month", "sort": null, "title": "Year-Month", "type": "nominal"}, "y": {"field": "from_station_name", "title": "Station Name", "type": "nominal"}}, "height": 400, "title": "Monthly Divvy Rides per Station pre Covid, Hyde Park", "width": 800}, {"data": {"name": "data-436f1e8c4e013ac3c4387b8b55c395fe"}, "mark": {"type": "rect"}, "encoding": {"color": {"field": "ride_count", "scale": {"scheme": "blues"}, "title": "Ride Count", "type": "quantitative"}, "x": {"field": "year_month", "sort": null, "title": "Year-Month", "type": "nominal"}, "y": {"field": "from_station_name", "title": "Station Name", "type": "nominal"}}, "height": 400, "title": "Monthly Divvy Rides per Station post Covid, Hyde Park", "width": 800}], "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-bdf1806b192749f586b9b561c3c3aba8": [{"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-01", "ride_count": 98, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-02", "ride_count": 94, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-03", "ride_count": 164, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-04", "ride_count": 203, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-05", "ride_count": 375, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-06", "ride_count": 301, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-07", "ride_count": 412, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-08", "ride_count": 400, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-09", "ride_count": 316, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-10", "ride_count": 321, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-11", "ride_count": 156, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2018-12", "ride_count": 97, "year": 2018}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-01", "ride_count": 47, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-02", "ride_count": 68, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-03", "ride_count": 116, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-04", "ride_count": 217, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-05", "ride_count": 297, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-06", "ride_count": 339, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-07", "ride_count": 384, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-08", "ride_count": 434, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-09", "ride_count": 419, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-10", "ride_count": 426, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-11", "ride_count": 233, "year": 2019}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2019-12", "ride_count": 155, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-01", "ride_count": 119, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-02", "ride_count": 108, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-03", "ride_count": 166, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-04", "ride_count": 236, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-05", "ride_count": 369, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-06", "ride_count": 257, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-07", "ride_count": 316, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-08", "ride_count": 265, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-09", "ride_count": 355, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-10", "ride_count": 376, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-11", "ride_count": 276, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2018-12", "ride_count": 179, "year": 2018}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-01", "ride_count": 167, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-02", "ride_count": 198, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-03", "ride_count": 201, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-04", "ride_count": 224, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-05", "ride_count": 282, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-06", "ride_count": 307, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-07", "ride_count": 365, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-08", "ride_count": 332, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-09", "ride_count": 315, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-10", "ride_count": 368, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-11", "ride_count": 238, "year": 2019}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2019-12", "ride_count": 158, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-01", "ride_count": 162, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-02", "ride_count": 144, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-03", "ride_count": 210, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-04", "ride_count": 271, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-05", "ride_count": 435, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-06", "ride_count": 332, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-07", "ride_count": 315, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-08", "ride_count": 521, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-09", "ride_count": 617, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-10", "ride_count": 730, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-11", "ride_count": 378, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2018-12", "ride_count": 217, "year": 2018}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-01", "ride_count": 194, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-02", "ride_count": 221, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-03", "ride_count": 253, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-04", "ride_count": 346, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-05", "ride_count": 414, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-06", "ride_count": 427, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-07", "ride_count": 473, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-08", "ride_count": 547, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-09", "ride_count": 649, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-10", "ride_count": 820, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-11", "ride_count": 466, "year": 2019}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2019-12", "ride_count": 221, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-01", "ride_count": 59, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-02", "ride_count": 50, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-03", "ride_count": 73, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-04", "ride_count": 84, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-05", "ride_count": 110, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-06", "ride_count": 116, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-07", "ride_count": 142, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-08", "ride_count": 118, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-09", "ride_count": 147, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-10", "ride_count": 155, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-11", "ride_count": 122, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2018-12", "ride_count": 96, "year": 2018}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-01", "ride_count": 66, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-02", "ride_count": 53, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-03", "ride_count": 75, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-04", "ride_count": 91, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-05", "ride_count": 122, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-06", "ride_count": 137, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-07", "ride_count": 159, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-08", "ride_count": 144, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-09", "ride_count": 162, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-10", "ride_count": 302, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-11", "ride_count": 170, "year": 2019}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2019-12", "ride_count": 96, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-01", "ride_count": 147, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-02", "ride_count": 184, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-03", "ride_count": 272, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-04", "ride_count": 297, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-05", "ride_count": 471, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-06", "ride_count": 425, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-07", "ride_count": 491, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-08", "ride_count": 519, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-09", "ride_count": 658, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-10", "ride_count": 852, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-11", "ride_count": 492, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2018-12", "ride_count": 273, "year": 2018}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-01", "ride_count": 237, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-02", "ride_count": 244, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-03", "ride_count": 306, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-04", "ride_count": 476, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-05", "ride_count": 634, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-06", "ride_count": 532, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-07", "ride_count": 530, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-08", "ride_count": 591, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-09", "ride_count": 643, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-10", "ride_count": 877, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-11", "ride_count": 529, "year": 2019}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2019-12", "ride_count": 305, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-01", "ride_count": 58, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-02", "ride_count": 63, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-03", "ride_count": 111, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-04", "ride_count": 110, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-05", "ride_count": 243, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-06", "ride_count": 201, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-07", "ride_count": 297, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-08", "ride_count": 359, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-09", "ride_count": 327, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-10", "ride_count": 266, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-11", "ride_count": 146, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2018-12", "ride_count": 91, "year": 2018}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-01", "ride_count": 73, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-02", "ride_count": 66, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-03", "ride_count": 99, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-04", "ride_count": 156, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-05", "ride_count": 235, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-06", "ride_count": 259, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-07", "ride_count": 323, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-08", "ride_count": 276, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-09", "ride_count": 345, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-10", "ride_count": 285, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-11", "ride_count": 154, "year": 2019}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2019-12", "ride_count": 103, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-01", "ride_count": 130, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-02", "ride_count": 112, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-03", "ride_count": 177, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-04", "ride_count": 167, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-05", "ride_count": 259, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-06", "ride_count": 256, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-07", "ride_count": 282, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-08", "ride_count": 361, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-09", "ride_count": 332, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-10", "ride_count": 354, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-11", "ride_count": 242, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2018-12", "ride_count": 152, "year": 2018}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-01", "ride_count": 171, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-02", "ride_count": 168, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-03", "ride_count": 235, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-04", "ride_count": 267, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-05", "ride_count": 357, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-06", "ride_count": 368, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-07", "ride_count": 447, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-08", "ride_count": 447, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-09", "ride_count": 385, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-10", "ride_count": 443, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-11", "ride_count": 232, "year": 2019}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2019-12", "ride_count": 154, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-01", "ride_count": 129, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-02", "ride_count": 98, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-03", "ride_count": 199, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-04", "ride_count": 210, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-05", "ride_count": 506, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-06", "ride_count": 567, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-07", "ride_count": 741, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-08", "ride_count": 690, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-09", "ride_count": 536, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-10", "ride_count": 342, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-11", "ride_count": 142, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2018-12", "ride_count": 102, "year": 2018}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-01", "ride_count": 105, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-02", "ride_count": 77, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-03", "ride_count": 149, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-04", "ride_count": 311, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-05", "ride_count": 404, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-06", "ride_count": 490, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-07", "ride_count": 672, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-08", "ride_count": 602, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-09", "ride_count": 497, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-10", "ride_count": 356, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-11", "ride_count": 145, "year": 2019}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2019-12", "ride_count": 108, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-01", "ride_count": 314, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-02", "ride_count": 327, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-03", "ride_count": 453, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-04", "ride_count": 586, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-05", "ride_count": 820, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-06", "ride_count": 609, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-07", "ride_count": 627, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-08", "ride_count": 757, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-09", "ride_count": 843, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-10", "ride_count": 1087, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-11", "ride_count": 620, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2018-12", "ride_count": 392, "year": 2018}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-01", "ride_count": 342, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-02", "ride_count": 416, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-03", "ride_count": 437, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-04", "ride_count": 705, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-05", "ride_count": 844, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-06", "ride_count": 722, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-07", "ride_count": 650, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-08", "ride_count": 650, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-09", "ride_count": 729, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-10", "ride_count": 1282, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-11", "ride_count": 753, "year": 2019}, {"from_station_name": "University Ave & 57th St", "year_month": "2019-12", "ride_count": 386, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-01", "ride_count": 101, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-02", "ride_count": 64, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-03", "ride_count": 114, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-04", "ride_count": 151, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-05", "ride_count": 257, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-06", "ride_count": 187, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-07", "ride_count": 212, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-08", "ride_count": 254, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-09", "ride_count": 336, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-10", "ride_count": 283, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-11", "ride_count": 171, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2018-12", "ride_count": 103, "year": 2018}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-01", "ride_count": 76, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-02", "ride_count": 114, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-03", "ride_count": 135, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-04", "ride_count": 176, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-05", "ride_count": 270, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-06", "ride_count": 221, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-07", "ride_count": 259, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-08", "ride_count": 257, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-09", "ride_count": 274, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-10", "ride_count": 451, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-11", "ride_count": 259, "year": 2019}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2019-12", "ride_count": 128, "year": 2019}], "data-436f1e8c4e013ac3c4387b8b55c395fe": [{"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2021-07", "ride_count": 529, "year": 2021}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2021-08", "ride_count": 518, "year": 2021}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2021-09", "ride_count": 533, "year": 2021}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2022-06", "ride_count": 723, "year": 2022}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2022-07", "ride_count": 767, "year": 2022}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2022-09", "ride_count": 593, "year": 2022}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2023-05", "ride_count": 478, "year": 2023}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2023-06", "ride_count": 484, "year": 2023}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2023-07", "ride_count": 494, "year": 2023}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2023-08", "ride_count": 560, "year": 2023}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2023-09", "ride_count": 531, "year": 2023}, {"from_station_name": "Cornell Ave & Hyde Park Blvd", "year_month": "2023-10", "ride_count": 499, "year": 2023}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2021-07", "ride_count": 390, "year": 2021}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2021-08", "ride_count": 446, "year": 2021}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2021-09", "ride_count": 486, "year": 2021}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2022-06", "ride_count": 465, "year": 2022}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2022-07", "ride_count": 523, "year": 2022}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2022-09", "ride_count": 302, "year": 2022}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2023-05", "ride_count": 364, "year": 2023}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2023-06", "ride_count": 352, "year": 2023}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2023-07", "ride_count": 320, "year": 2023}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2023-08", "ride_count": 446, "year": 2023}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2023-09", "ride_count": 453, "year": 2023}, {"from_station_name": "Ellis Ave & 53rd St", "year_month": "2023-10", "ride_count": 610, "year": 2023}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2021-07", "ride_count": 195, "year": 2021}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2021-08", "ride_count": 457, "year": 2021}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2021-09", "ride_count": 781, "year": 2021}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2022-06", "ride_count": 895, "year": 2022}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2022-07", "ride_count": 1036, "year": 2022}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2022-09", "ride_count": 942, "year": 2022}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2023-05", "ride_count": 768, "year": 2023}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2023-06", "ride_count": 691, "year": 2023}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2023-07", "ride_count": 747, "year": 2023}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2023-08", "ride_count": 866, "year": 2023}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2023-09", "ride_count": 945, "year": 2023}, {"from_station_name": "Ellis Ave & 55th St", "year_month": "2023-10", "ride_count": 1154, "year": 2023}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2021-07", "ride_count": 157, "year": 2021}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2021-08", "ride_count": 175, "year": 2021}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2021-09", "ride_count": 269, "year": 2021}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2022-06", "ride_count": 244, "year": 2022}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2022-07", "ride_count": 168, "year": 2022}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2022-09", "ride_count": 281, "year": 2022}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2023-05", "ride_count": 366, "year": 2023}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2023-06", "ride_count": 144, "year": 2023}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2023-07", "ride_count": 150, "year": 2023}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2023-08", "ride_count": 149, "year": 2023}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2023-09", "ride_count": 152, "year": 2023}, {"from_station_name": "Harper Ave & 59th St", "year_month": "2023-10", "ride_count": 144, "year": 2023}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2021-07", "ride_count": 697, "year": 2021}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2021-08", "ride_count": 762, "year": 2021}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2021-09", "ride_count": 961, "year": 2021}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2022-06", "ride_count": 1188, "year": 2022}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2022-07", "ride_count": 1394, "year": 2022}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2022-09", "ride_count": 1148, "year": 2022}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2023-05", "ride_count": 1085, "year": 2023}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2023-06", "ride_count": 965, "year": 2023}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2023-07", "ride_count": 1019, "year": 2023}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2023-08", "ride_count": 954, "year": 2023}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2023-09", "ride_count": 936, "year": 2023}, {"from_station_name": "Kimbark Ave & 53rd St", "year_month": "2023-10", "ride_count": 1254, "year": 2023}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2021-07", "ride_count": 411, "year": 2021}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2021-08", "ride_count": 378, "year": 2021}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2021-09", "ride_count": 487, "year": 2021}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2022-06", "ride_count": 563, "year": 2022}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2022-07", "ride_count": 618, "year": 2022}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2022-09", "ride_count": 409, "year": 2022}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2023-05", "ride_count": 350, "year": 2023}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2023-06", "ride_count": 420, "year": 2023}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2023-07", "ride_count": 449, "year": 2023}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2023-08", "ride_count": 469, "year": 2023}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2023-09", "ride_count": 492, "year": 2023}, {"from_station_name": "Lake Park Ave & 53rd St", "year_month": "2023-10", "ride_count": 511, "year": 2023}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2021-07", "ride_count": 402, "year": 2021}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2021-08", "ride_count": 467, "year": 2021}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2021-09", "ride_count": 472, "year": 2021}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2022-06", "ride_count": 559, "year": 2022}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2022-07", "ride_count": 585, "year": 2022}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2022-09", "ride_count": 514, "year": 2022}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2023-05", "ride_count": 633, "year": 2023}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2023-06", "ride_count": 575, "year": 2023}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2023-07", "ride_count": 558, "year": 2023}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2023-08", "ride_count": 642, "year": 2023}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2023-09", "ride_count": 593, "year": 2023}, {"from_station_name": "Lake Park Ave & 56th St", "year_month": "2023-10", "ride_count": 791, "year": 2023}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2021-07", "ride_count": 965, "year": 2021}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2021-08", "ride_count": 820, "year": 2021}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2021-09", "ride_count": 917, "year": 2021}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2022-06", "ride_count": 969, "year": 2022}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2022-07", "ride_count": 920, "year": 2022}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2022-09", "ride_count": 737, "year": 2022}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2023-05", "ride_count": 791, "year": 2023}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2023-06", "ride_count": 725, "year": 2023}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2023-07", "ride_count": 857, "year": 2023}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2023-08", "ride_count": 701, "year": 2023}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2023-09", "ride_count": 698, "year": 2023}, {"from_station_name": "Shore Dr & 55th St", "year_month": "2023-10", "ride_count": 556, "year": 2023}, {"from_station_name": "University Ave & 57th St", "year_month": "2021-07", "ride_count": 717, "year": 2021}, {"from_station_name": "University Ave & 57th St", "year_month": "2021-08", "ride_count": 831, "year": 2021}, {"from_station_name": "University Ave & 57th St", "year_month": "2021-09", "ride_count": 1203, "year": 2021}, {"from_station_name": "University Ave & 57th St", "year_month": "2022-06", "ride_count": 1195, "year": 2022}, {"from_station_name": "University Ave & 57th St", "year_month": "2022-07", "ride_count": 1197, "year": 2022}, {"from_station_name": "University Ave & 57th St", "year_month": "2022-09", "ride_count": 1277, "year": 2022}, {"from_station_name": "University Ave & 57th St", "year_month": "2023-05", "ride_count": 1633, "year": 2023}, {"from_station_name": "University Ave & 57th St", "year_month": "2023-06", "ride_count": 955, "year": 2023}, {"from_station_name": "University Ave & 57th St", "year_month": "2023-07", "ride_count": 1043, "year": 2023}, {"from_station_name": "University Ave & 57th St", "year_month": "2023-08", "ride_count": 1065, "year": 2023}, {"from_station_name": "University Ave & 57th St", "year_month": "2023-09", "ride_count": 1221, "year": 2023}, {"from_station_name": "University Ave & 57th St", "year_month": "2023-10", "ride_count": 1976, "year": 2023}, {"from_station_name": "University Ave & 59th St", "year_month": "2023-08", "ride_count": 14, "year": 2023}, {"from_station_name": "University Ave & 59th St", "year_month": "2023-09", "ride_count": 282, "year": 2023}, {"from_station_name": "University Ave & 59th St", "year_month": "2023-10", "ride_count": 512, "year": 2023}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2021-07", "ride_count": 336, "year": 2021}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2021-08", "ride_count": 416, "year": 2021}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2021-09", "ride_count": 578, "year": 2021}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2022-06", "ride_count": 617, "year": 2022}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2022-07", "ride_count": 634, "year": 2022}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2022-09", "ride_count": 618, "year": 2022}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2023-05", "ride_count": 730, "year": 2023}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2023-06", "ride_count": 522, "year": 2023}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2023-07", "ride_count": 600, "year": 2023}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2023-08", "ride_count": 581, "year": 2023}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2023-09", "ride_count": 730, "year": 2023}, {"from_station_name": "Woodlawn Ave & 55th St", "year_month": "2023-10", "ride_count": 957, "year": 2023}, {"from_station_name": "Woodlawn Ave & 58th St", "year_month": "2023-09", "ride_count": 256, "year": 2023}, {"from_station_name": "Woodlawn Ave & 58th St", "year_month": "2023-10", "ride_count": 623, "year": 2023}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
<ol start="10" type="1">
<li></li>
</ol>
<div id="419b2b1b" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="http://localhost:6678/#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate average rides per month</span></span>
<span id="cb20-2"><a href="http://localhost:6678/#cb20-2" aria-hidden="true" tabindex="-1"></a>avg_rides_per_month <span class="op">=</span> rides_per_station_per_month.groupby(<span class="st">'year_month'</span>)[<span class="st">'ride_count'</span>].mean().reset_index(name<span class="op">=</span><span class="st">'avg_ride_count'</span>)</span>
<span id="cb20-3"><a href="http://localhost:6678/#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="http://localhost:6678/#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract year and month to filter data by full years</span></span>
<span id="cb20-5"><a href="http://localhost:6678/#cb20-5" aria-hidden="true" tabindex="-1"></a>avg_rides_per_month[<span class="st">"year_month"</span>] <span class="op">=</span> pd.to_datetime(avg_rides_per_month[<span class="st">"year_month"</span>])</span>
<span id="cb20-6"><a href="http://localhost:6678/#cb20-6" aria-hidden="true" tabindex="-1"></a>avg_rides_per_month[<span class="st">'year'</span>] <span class="op">=</span> avg_rides_per_month[<span class="st">'year_month'</span>].dt.year</span>
<span id="cb20-7"><a href="http://localhost:6678/#cb20-7" aria-hidden="true" tabindex="-1"></a>avg_rides_per_month[<span class="st">'month'</span>] <span class="op">=</span> avg_rides_per_month[<span class="st">'year_month'</span>].dt.month</span>
<span id="cb20-8"><a href="http://localhost:6678/#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="http://localhost:6678/#cb20-9" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> {</span>
<span id="cb20-10"><a href="http://localhost:6678/#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>: <span class="st">"January"</span>, </span>
<span id="cb20-11"><a href="http://localhost:6678/#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>: <span class="st">"February"</span>, </span>
<span id="cb20-12"><a href="http://localhost:6678/#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>: <span class="st">"March"</span>,</span>
<span id="cb20-13"><a href="http://localhost:6678/#cb20-13" aria-hidden="true" tabindex="-1"></a>    <span class="dv">4</span>: <span class="st">"April"</span>,</span>
<span id="cb20-14"><a href="http://localhost:6678/#cb20-14" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5</span>: <span class="st">"May"</span>,</span>
<span id="cb20-15"><a href="http://localhost:6678/#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="dv">6</span>: <span class="st">"June"</span>,</span>
<span id="cb20-16"><a href="http://localhost:6678/#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="dv">7</span>: <span class="st">"July"</span>,</span>
<span id="cb20-17"><a href="http://localhost:6678/#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="dv">8</span>: <span class="st">"August"</span>,</span>
<span id="cb20-18"><a href="http://localhost:6678/#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="dv">9</span>: <span class="st">"September"</span>,</span>
<span id="cb20-19"><a href="http://localhost:6678/#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="dv">10</span>: <span class="st">"October"</span>, </span>
<span id="cb20-20"><a href="http://localhost:6678/#cb20-20" aria-hidden="true" tabindex="-1"></a>    <span class="dv">11</span>: <span class="st">"November"</span>,</span>
<span id="cb20-21"><a href="http://localhost:6678/#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="dv">12</span>: <span class="st">"December"</span>}</span>
<span id="cb20-22"><a href="http://localhost:6678/#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-23"><a href="http://localhost:6678/#cb20-23" aria-hidden="true" tabindex="-1"></a>avg_rides_per_month_filtered <span class="op">=</span> avg_rides_per_month</span>
<span id="cb20-24"><a href="http://localhost:6678/#cb20-24" aria-hidden="true" tabindex="-1"></a>avg_rides_per_month_filtered[<span class="st">"month"</span>] <span class="op">=</span> avg_rides_per_month[<span class="st">"month"</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: months[x]).astype(<span class="bu">str</span>)</span>
<span id="cb20-25"><a href="http://localhost:6678/#cb20-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-26"><a href="http://localhost:6678/#cb20-26" aria-hidden="true" tabindex="-1"></a>avg_rides_per_month_filtered_groupby <span class="op">=</span> avg_rides_per_month_filtered.groupby(<span class="st">"month"</span>).mean().reset_index()</span>
<span id="cb20-27"><a href="http://localhost:6678/#cb20-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-28"><a href="http://localhost:6678/#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="co"># making the bar graph</span></span>
<span id="cb20-29"><a href="http://localhost:6678/#cb20-29" aria-hidden="true" tabindex="-1"></a>bar_chart_divvy <span class="op">=</span> alt.Chart(avg_rides_per_month_filtered_groupby).mark_bar().encode(</span>
<span id="cb20-30"><a href="http://localhost:6678/#cb20-30" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>alt.X(<span class="st">'month:N'</span>, sort<span class="op">=</span>[<span class="st">'January'</span>, <span class="st">'February'</span>, <span class="st">'March'</span>, <span class="st">'April'</span>, <span class="st">'May'</span>, <span class="st">'June'</span>, <span class="st">'July'</span>, <span class="st">'August'</span>, <span class="st">'September'</span>, <span class="st">'October'</span>, <span class="st">'November'</span>, <span class="st">'December'</span>]),</span>
<span id="cb20-31"><a href="http://localhost:6678/#cb20-31" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'avg_ride_count:Q'</span>,  </span>
<span id="cb20-32"><a href="http://localhost:6678/#cb20-32" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb20-33"><a href="http://localhost:6678/#cb20-33" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">800</span>, </span>
<span id="cb20-34"><a href="http://localhost:6678/#cb20-34" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">400</span>,</span>
<span id="cb20-35"><a href="http://localhost:6678/#cb20-35" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span> <span class="st">"Average Divvy Monthly Ridership, Hyde Park"</span>  </span>
<span id="cb20-36"><a href="http://localhost:6678/#cb20-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-37"><a href="http://localhost:6678/#cb20-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-38"><a href="http://localhost:6678/#cb20-38" aria-hidden="true" tabindex="-1"></a>bar_chart_divvy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">

<style>
  #altair-viz-93c6137eabd14ff2925dfe5023a98b29.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-93c6137eabd14ff2925dfe5023a98b29.vega-embed details,
  #altair-viz-93c6137eabd14ff2925dfe5023a98b29.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-93c6137eabd14ff2925dfe5023a98b29" class="vega-embed has-actions"><div class="chart-wrapper" role="graphics-document" aria-roledescription="visualization" aria-label="Vega visualization" style="cursor: default;"><canvas width="849" height="503" class="marks"></canvas><form class="vega-bindings"></form></div><details title="Click to view actions"><summary>
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg></summary><div class="vega-actions"><a href="http://localhost:6678/#" target="_blank" download="visualization.svg">Save as SVG</a><a href="http://localhost:6678/#" target="_blank" download="visualization.png">Save as PNG</a><a href="http://localhost:6678/#">View Source</a><a href="http://localhost:6678/#">View Compiled Vega</a><a href="http://localhost:6678/#">Open in Vega Editor</a></div></details></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-93c6137eabd14ff2925dfe5023a98b29") {
      outputDiv = document.getElementById("altair-viz-93c6137eabd14ff2925dfe5023a98b29");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.20.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.20.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-df1ed79ad72a62ad2756fd8e90555bf9"}, "mark": {"type": "bar"}, "encoding": {"x": {"field": "month", "sort": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], "type": "nominal"}, "y": {"field": "avg_ride_count", "type": "quantitative"}}, "height": 400, "title": "Average Divvy Monthly Ridership, Hyde Park", "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-df1ed79ad72a62ad2756fd8e90555bf9": [{"month": "April", "year_month": "2018-09-30T12:00:00", "avg_ride_count": 264.2, "year": 2018.5}, {"month": "August", "year_month": "2020-10-30T18:00:00", "avg_ride_count": 491.3727272727273, "year": 2020.25}, {"month": "December", "year_month": "2019-06-01T12:00:00", "avg_ride_count": 175.8, "year": 2018.5}, {"month": "February", "year_month": "2018-08-02T12:00:00", "avg_ride_count": 143.45, "year": 2018.5}, {"month": "January", "year_month": "2018-07-02T12:00:00", "avg_ride_count": 139.75, "year": 2018.5}, {"month": "July", "year_month": "2021-02-04T14:24:00", "avg_ride_count": 539.5, "year": 2020.6}, {"month": "June", "year_month": "2020-11-30T00:00:00", "avg_ride_count": 507.59999999999997, "year": 2020.5}, {"month": "March", "year_month": "2018-08-30T12:00:00", "avg_ride_count": 197.25, "year": 2018.5}, {"month": "May", "year_month": "2020-04-30T08:00:00", "avg_ride_count": 496.7333333333333, "year": 2020.0}, {"month": "November", "year_month": "2019-05-02T12:00:00", "avg_ride_count": 296.2, "year": 2018.5}, {"month": "October", "year_month": "2020-09-30T08:00:00", "avg_ride_count": 612.1722222222222, "year": 2020.0}, {"month": "September", "year_month": "2021-04-07T14:24:00", "avg_ride_count": 569.3433333333334, "year": 2020.6}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
<ol start="11" type="1">
<li></li>
</ol>
<div id="5dd08610" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="http://localhost:6678/#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#creating the file that nasser needs for the dashboard</span></span>
<span id="cb21-2"><a href="http://localhost:6678/#cb21-2" aria-hidden="true" tabindex="-1"></a>quarterly_rides[<span class="st">"year_month"</span>] <span class="op">=</span> pd.to_datetime(quarterly_rides[<span class="st">"year_month"</span>])</span>
<span id="cb21-3"><a href="http://localhost:6678/#cb21-3" aria-hidden="true" tabindex="-1"></a>quarterly_rides[<span class="st">"month"</span>] <span class="op">=</span> quarterly_rides[<span class="st">"year_month"</span>].dt.month</span>
<span id="cb21-4"><a href="http://localhost:6678/#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="http://localhost:6678/#cb21-5" aria-hidden="true" tabindex="-1"></a>quarterly_rides_groupby <span class="op">=</span> quarterly_rides.groupby(<span class="st">"month"</span>).count().reset_index().drop([<span class="st">"end_time"</span>, <span class="st">"from_station_name"</span>, <span class="st">"to_station_name"</span>, <span class="st">"year_month"</span>], axis <span class="op">=</span> <span class="dv">1</span>).rename(columns <span class="op">=</span> {<span class="st">"start_time"</span> : <span class="st">"count"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->





<script>window.backupDefine = window.define; window.define = undefined;</script>
<script type="text/javascript" src="./Final Project, Nasser_Mario_Daniel_files/quarto-preview.js.download"></script>
<script>window.define = window.backupDefine; window.backupDefine = undefined;</script>
<script type="text/javascript">
  const options = {
    origin: "http://localhost:6678",
    search: "?quartoPreviewReqId=1733193855004&amp;quartoPreviewThemeCategory=dark",
    inputFile: "C:\Users\danie\Desktop\Test\FP_DataCleaning.qmd",
    isPresentation: false
  }
  document.addEventListener("DOMContentLoaded", function () {
    window.QuartoPreview.init(options);
  });
</script>
<div><div dir="ltr" class="fui-FluentProvider fui-FluentProviderr0 ___jdtuxv0 f19n0e5 fxugw4r f1o700av fk6fouc fkhj508 figsok6 f1i3iumi"></div></div><i tabindex="0" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i></body></html>